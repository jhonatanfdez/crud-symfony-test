{# ============================================================================
   DETALLES DE PRODUCTO - Vista de información completa
   ============================================================================
   
   Ruta: /producto/{id}
   Controlador: ProductoController::show()
   Método HTTP: GET
   Requiere: Autenticación (IS_AUTHENTICATED)
   
   Funcionalidades:
   - Muestra detalles completos de un producto específico
   - Campos mostrados: ID, Nombre, Precio, Categoría, Fecha, Usuario creador
   - Precio formateado con 2 decimales: number_format(2, '.', ',')
   - Fecha formateada: d/m/Y
   - Link a la categoría asociada
   - Botones de acción: Volver, Editar, Eliminar
   - Tabla responsive con diseño Bootstrap
   - Iconos y badges
   
   Variables recibidas:
   - {{ producto }}: Entidad Producto con los datos a mostrar
   - {{ producto.categoria }}: Relación ManyToOne con Categoria
   - {{ producto.user }}: Relación ManyToOne con User
#}
{% extends 'base_admin.html.twig' %}

{% block title %}Producto - {{ producto.nombre }}{% endblock %}

{% block body %}
<div class="container mt-5">
    <div class="row mb-4">
        <div class="col">
            <h1 class="display-5">
                <i class="bi bi-box-fill"></i> Producto: {{ producto.nombre }}
            </h1>
        </div>
    </div>

    <div class="card shadow-sm">
        <div class="card-header bg-primary text-white">
            <h5 class="mb-0"><i class="bi bi-info-circle"></i> Detalles del Producto</h5>
        </div>
        <div class="card-body">
            <table class="table table-borderless">
                <tbody>
                    <tr>
                        <th scope="row" style="width: 150px;">
                            <i class="bi bi-hash"></i> ID:
                        </th>
                        <td class="fw-bold">{{ producto.id }}</td>
                    </tr>
                    <tr>
                        <th scope="row">
                            <i class="bi bi-tag"></i> Nombre:
                        </th>
                        <td class="fs-5">{{ producto.nombre }}</td>
                    </tr>
                    <tr>
                        <th scope="row">
                            <i class="bi bi-cash-coin"></i> Precio:
                        </th>
                        <td class="fs-4 text-success fw-bold">
                            ${{ producto.precio|number_format(2, '.', ',') }}
                        </td>
                    </tr>
                    <tr>
                        <th scope="row">
                            <i class="bi bi-calendar-event"></i> Fecha:
                        </th>
                        <td>
                            {% if producto.fecha %}
                                <span class="badge bg-info text-dark">
                                    {{ producto.fecha|date('d/m/Y') }}
                                </span>
                                <small class="text-muted ms-2">
                                    {{ producto.fecha|date('H:i:s') }}
                                </small>
                            {% else %}
                                <span class="text-muted">No especificada</span>
                            {% endif %}
                        </td>
                    </tr>
                    <tr>
                        <th scope="row">
                            <i class="bi bi-folder"></i> Categoría:
                        </th>
                        <td>
                            {% if producto.categoria %}
                                <span class="badge bg-primary fs-6">
                                    <i class="bi bi-folder-fill"></i> {{ producto.categoria.nombre }}
                                </span>
                            {% else %}
                                <span class="badge bg-secondary">Sin categoría</span>
                            {% endif %}
                        </td>
                    </tr>
                    <tr>
                        <th scope="row">
                            <i class="bi bi-person-circle"></i> Usuario:
                        </th>
                        <td>
                            {% if producto.user %}
                                <span class="badge bg-success fs-6">
                                    <i class="bi bi-person-fill"></i> {{ producto.user.email }}
                                </span>
                            {% else %}
                                <span class="badge bg-secondary">Sin usuario</span>
                            {% endif %}
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="mt-4 d-flex gap-2">
        <a href="{{ path('app_producto_index') }}" class="btn btn-secondary">
            <i class="bi bi-arrow-left"></i> Volver al listado
        </a>
        <a href="{{ path('app_producto_edit', {'id': producto.id}) }}" class="btn btn-warning">
            <i class="bi bi-pencil"></i> Editar
        </a>
        
        <form method="post" 
              action="{{ path('app_producto_delete', {'id': producto.id}) }}" 
              style="display:inline;"
              onsubmit="return confirm('¿Estás seguro de eliminar este producto?');">
            <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ producto.id) }}">
            <button type="submit" class="btn btn-danger">
                <i class="bi bi-trash"></i> Eliminar
            </button>
        </form>
    </div>
</div>
{% endblock %}