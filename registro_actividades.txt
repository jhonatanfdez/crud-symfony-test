REGISTRO DE ACTIVIDADES - TUTORIAL SYMFONY
===========================================
[13/11/2025 06:00:00 p.m.] v1.11.0 - Refactor visual de vistas de Categoría con Bootstrap 5


---

[12/11/2025 09:17:05 p.m.] Comando ejecutado: git init

¿Qué se busca?
- Inicializar un repositorio Git en el directorio del proyecto
- Preparar el control de versiones para el tutorial de Symfony
- Permitir el seguimiento de cambios durante el desarrollo

Resultado:
- Repositorio Git inicializado exitosamente en /home/jhonatanycris/Escritorio/test1/.git/
- Rama inicial creada con el nombre 'master'

---

[12/11/2025 09:19:00 p.m.] Comandos ejecutados: Configuración inicial del repositorio Git

Comandos:
1. echo "# crud-symfony-test" >> README.md
2. git add README.md
3. git commit -m "first commit"
4. git branch -M main
5. git remote add origin https://github.com/jhonatanfdez/crud-symfony-test.git
6. git push -u origin main

¿Qué se busca?
- Crear un archivo README.md con el título del proyecto
- Agregar el archivo al staging area de Git
- Realizar el primer commit del proyecto
- Renombrar la rama de 'master' a 'main' (convención moderna)
- Conectar el repositorio local con el repositorio remoto en GitHub
- Subir los cambios al repositorio remoto

Resultado:
- README.md creado exitosamente con el título "# crud-symfony-test"
- Primer commit realizado con hash bd080cc
- Rama renombrada de 'master' a 'main'
- Repositorio remoto configurado: https://github.com/jhonatanfdez/crud-symfony-test.git
- Cambios subidos exitosamente a GitHub en la rama 'main'
- Rama local configurada para rastrear 'origin/main'

---

[12/11/2025 09:21:10 p.m.] Instalación de Symfony CLI

Comandos:
# Para Linux:
curl -sS https://get.symfony.com/cli/installer | bash

# O con wget:
wget https://get.symfony.com/cli/installer -O - | bash
[13/11/2025 06:05:00 p.m.] Refactor visual completo de templates de Categoría (Bootstrap 5)

# Mover el binario a una ubicación global:

¿Qué se busca?


Comandos:
# Crear un proyecto web completo con Symfony:
symfony new nombre_proyecto --version="7.1.*" --webapp

# O usando Composer:
composer create-project symfony/skeleton:"7.1.*" nombre_proyecto
cd nombre_proyecto
composer require webapp

# Para este tutorial:
symfony new crud-symfony --version="7.1.*" --webapp

¿Qué se busca?
- Crear un nuevo proyecto de Symfony con todas las dependencias para una aplicación web
- Instalar Twig, Doctrine, formularios, validación, seguridad y otras herramientas esenciales
- Tener la estructura base del proyecto lista para trabajar

---

[12/11/2025 09:22:46 p.m.] Explicación de carpetas importantes

Estructura del proyecto Symfony:

/bin/           - Ejecutables del proyecto (console)
/config/        - Archivos de configuración (routes, services, packages)
/migrations/    - Migraciones de base de datos
/public/        - Punto de entrada web (index.php) y archivos públicos (CSS, JS, imágenes)
/src/
    /Controller/    - Controladores
    /Entity/        - Entidades de Doctrine (modelos)
    /Form/          - Clases de formularios
    /Repository/    - Repositorios para consultas a la base de datos
/templates/     - Plantillas Twig
/var/           - Archivos temporales (cache, logs)
/vendor/        - Dependencias de Composer

Archivos importantes:
- .env          - Variables de entorno (configuración de base de datos)
- composer.json - Dependencias del proyecto
- symfony.lock  - Versiones bloqueadas de las recetas de Symfony

---

[12/11/2025 09:23:55 p.m.] ¿Por qué elegir Symfony sobre Laravel o Drupal?

SYMFONY vs LARAVEL:

✓ Rendimiento:
  - Symfony es más rápido y ligero en su versión skeleton
  - Mejor para aplicaciones empresariales de gran escala
  
  - Symfony sigue estrictamente los estándares PSR (PHP Standards Recommendations)
  
✓ Componentes reutilizables:
  - Los componentes de Symfony son usados por Laravel, Drupal, phpBB, y más
  - Symfony es el framework de frameworks
  
✓ Documentación:
  - Symfony tiene documentación más técnica y completa
  - Ideal para desarrolladores que buscan entender a fondo

SYMFONY vs DRUPAL:

✓ Propósito:
  - Symfony es un framework para desarrollar aplicaciones desde cero
  - Drupal es un CMS (Content Management System) construido sobre Symfony
  
✓ Flexibilidad:
  - Symfony te da control total sobre la arquitectura
  - Drupal es mejor para sitios web de contenido, pero más rígido
  
✓ Curva de aprendizaje:
  - Symfony requiere más conocimientos de PHP, pero es más versátil
  - Drupal es más fácil para gestión de contenido, pero limitado para apps custom

✓ Casos de uso:
  - Symfony: APIs, aplicaciones web complejas, microservicios, SaaS
  - Drupal: Blogs, portales de noticias, sitios corporativos con mucho contenido

RESUMEN:
Symfony es la mejor opción cuando:
- Necesitas control total de tu aplicación
- Quieres aprender patrones de diseño profesionales
- Buscas rendimiento y escalabilidad
- Desarrollas APIs RESTful
- Trabajas en proyectos empresariales de larga duración

---

[12/11/2025 09:27:35 p.m.] Comando ejecutado: symfony new crud-symfony --version="7.1.*" --webapp

¿Qué se busca?
- Crear un nuevo proyecto Symfony con la versión 7.1
- Instalar todas las dependencias necesarias para una aplicación web completa (--webapp)
- Incluir Twig para templates, Doctrine para base de datos, formularios, seguridad, etc.
- Configurar automáticamente Git en el proyecto

Resultado:
- Proyecto creado exitosamente en /home/jhonatanycris/Escritorio/test1/crud-symfony
- Symfony 7.1.* instalado con todas las dependencias webapp
- Git inicializado automáticamente en el proyecto
- Estructura de carpetas y archivos de configuración generados

Dependencias principales instaladas:
- Twig (motor de plantillas)
- Doctrine ORM (base de datos)
- Security Bundle (autenticación y autorización)
- Form Component (formularios)
- Validator (validación de datos)
- Mailer (envío de correos)
- Asset Mapper (gestión de assets CSS/JS)

---

[12/11/2025 09:28:35 p.m.] Comando ejecutado: rm -rf /home/jhonatanycris/Escritorio/test1/crud-symfony/.git

¿Qué se busca?
- Eliminar el repositorio Git que Symfony creó automáticamente en el proyecto crud-symfony
- Mantener un único repositorio Git en la carpeta principal test1
- Evitar conflictos con repositorios Git anidados

Resultado:
- Directorio .git eliminado de crud-symfony
- Ahora crud-symfony forma parte del repositorio Git principal en test1

---

[12/11/2025 09:30:08 p.m.] Comandos ejecutados: Commit y versionado del proyecto

Comandos:
1. git add .
2. git commit -m "Proyecto Symfony 7.1 creado con webapp"
3. git tag -a v1.0.0 -m "v1.0.0: Proyecto Symfony inicial con webapp"
4. git push origin main
5. git push origin v1.0.0

¿Qué se busca?
- Agregar todos los archivos nuevos y modificados al staging area
- Crear un commit con el proyecto Symfony y el registro de actividades
- Crear una etiqueta (tag) de versión v1.0.0 para marcar este hito
- Subir los cambios al repositorio remoto en GitHub
- Subir el tag al repositorio remoto

Resultado:
- Commit creado exitosamente con hash 085e4db
- 52 archivos cambiados, 11073 inserciones
- Tag v1.0.0 creado y anotado
- Cambios subidos a GitHub en la rama main
- Tag v1.0.0 subido exitosamente a GitHub
- Versión inicial del proyecto documentada y respaldada

---

[12/11/2025 09:31:40 p.m.] Comando ejecutado: symfony server:start

¿Qué se busca?
- Iniciar el servidor de desarrollo local de Symfony
- Probar que el proyecto se ejecuta correctamente
- Tener acceso a la aplicación web a través del navegador
- Verificar que PHP-FPM está funcionando correctamente

Resultado:
- Servidor web iniciado exitosamente
- URL del servidor: http://127.0.0.1:8000
- PHP-FPM versión 8.3.27 en ejecución
- Servidor optimizado solo para desarrollo local
- Logs disponibles en: /home/jhonatanycris/.symfony5/log/

Nota importante:
- Este servidor es SOLO para desarrollo, nunca usar en producción
- Escucha únicamente en 127.0.0.1 (localhost)
- Para detener el servidor: Ctrl+C o symfony server:stop

---

[12/11/2025 09:34:16 p.m.] Comando ejecutado: git commit -m "Servidor Symfony iniciado - registro actualizado"

¿Qué se busca?
- Guardar los cambios realizados en el registro de actividades
- Documentar el inicio del servidor de desarrollo

Resultado:
- Commit creado exitosamente con hash 149aa10
- 1 archivo modificado (registro_actividades.txt)
- 48 líneas añadidas al registro

---

[12/11/2025 09:34:47 p.m.] Instalación y configuración de CSS (SimpleCSS)

Opción 1: Agregar SimpleCSS mediante CDN en la plantilla base

Archivo: templates/base.html.twig
Agregar en el <head>:
<link rel="stylesheet" href="https://cdn.simplecss.org/simple.min.css">

Opción 2: Descargar SimpleCSS localmente

Comandos:
cd /home/jhonatanycris/Escritorio/test1/crud-symfony/public
mkdir css
cd css
wget https://cdn.simplecss.org/simple.min.css

Luego en templates/base.html.twig agregar:
<link rel="stylesheet" href="{{ asset('css/simple.min.css') }}">

¿Qué se busca?
- Agregar estilos CSS básicos al proyecto Symfony
- Mejorar la apariencia visual sin escribir CSS desde cero
- SimpleCSS proporciona estilos semánticos automáticos para HTML

Ventajas de SimpleCSS:
- No requiere clases CSS específicas
- Estiliza automáticamente elementos HTML semánticos
- Perfecto para prototipos y proyectos de aprendizaje
- Muy ligero (menos de 10KB)

---

[12/11/2025 09:35:41 p.m.] SimpleCSS implementado en el proyecto

Archivo modificado: crud-symfony/templates/base.html.twig

- Los elementos HTML tendrán estilos automáticos sin necesidad de clases CSS

Próximos pasos:
- Crear controladores y vistas para ver SimpleCSS en acción
[13/11/2025 05:56:45 p.m.] CAMBIO DE DISEÑO EN VISTAS DE CATEGORÍA (Bootstrap 5)
- Los formularios, tablas y elementos tendrán estilos automáticamente
---

[12/11/2025 09:36:31 p.m.] Comandos ejecutados: Commit y push de SimpleCSS

Comandos:
1. git add .
2. git commit -m "SimpleCSS agregado al proyecto"
3. git push origin main

¿Qué se busca?
- Guardar los cambios de SimpleCSS y el registro actualizado
- Subir los cambios al repositorio remoto en GitHub
- Mantener el historial del proyecto actualizado

Resultado:
- Commit creado exitosamente con hash 9f93547
- 2 archivos modificados con 64 líneas añadidas
- Cambios subidos exitosamente a GitHub
- Rama main actualizada en el repositorio remoto

---

[12/11/2025 09:38:47 p.m.] Instalación del sistema de autenticación de usuarios

Comandos para crear el sistema de usuarios:

1. Crear la entidad User:
cd /home/jhonatanycris/Escritorio/test1/crud-symfony
php bin/console make:user

Respuestas sugeridas:
- The name of the security user class: User
- Do you want to store user data in the database? Yes
- Enter a property name that will be the unique "display" name: email
- Will this app need to hash/check user passwords? Yes

2. Configurar la conexión a la base de datos MySQL:

Editar el archivo .env y modificar la línea DATABASE_URL:
DATABASE_URL="mysql://usuario:contraseña@127.0.0.1:3306/nombre_base_datos?serverVersion=8.0.32&charset=utf8mb4"

Ejemplo:
DATABASE_URL="mysql://root:@127.0.0.1:3306/crud_symfony?serverVersion=8.0.32&charset=utf8mb4"

3. Crear la base de datos:
php bin/console doctrine:database:create

4. Crear la migración de base de datos:
php bin/console make:migration

5. Ejecutar la migración:
php bin/console doctrine:migrations:migrate

6. Crear el sistema de autenticación:
php bin/console make:auth

Respuestas sugeridas:
- What style of authentication: 1 (Login form authenticator)
- The class name: LoginFormAuthenticator
- Choose a name for the controller: SecurityController
- Generate a '/logout' URL? Yes

7. Crear el formulario de registro:
php bin/console make:registration-form

Respuestas sugeridas:
- Do you want to add a @UniqueEntity validation?: Yes
- Do you want to send an email to verify the user's email?: No
- Do you want to automatically authenticate after registration?: Yes

¿Qué se busca?
- Crear la entidad User para almacenar usuarios en la base de datos
- Implementar el sistema de login (autenticación)
- Crear el formulario de registro de nuevos usuarios
- Hash de contraseñas para seguridad
- Rutas de login, logout y registro automáticas

---

[12/11/2025 09:48:59 p.m.] Comandos ejecutados: Commit, versionado y push del sistema de usuarios

Comandos:
1. git add .
2. git commit -m "Sistema de autenticación: Entidad User y migración de BD creadas"
3. git tag -a v1.1.0 -m "v1.1.0: Sistema de autenticación - Entidad User y base de datos configurada"
4. git push origin main
5. git push origin v1.1.0

¿Qué se busca?
- Guardar los cambios del sistema de autenticación
- Crear una nueva versión del proyecto (v1.1.0)
- Subir todos los cambios al repositorio remoto en GitHub

Resultado:
- Commit creado exitosamente con hash 78e87c9
- 6 archivos modificados, 283 inserciones
- Archivos creados:
  * crud-symfony/migrations/Version20251113014721.php (migración de BD)
  * crud-symfony/src/Entity/User.php (entidad User)
  * crud-symfony/src/Repository/UserRepository.php (repositorio)
- Tag v1.1.0 creado y subido exitosamente a GitHub
- Versión del sistema de usuarios documentada y respaldada

---

[12/11/2025 09:52:14 p.m.] Explicación: Entidad User y UserRepository

ENTIDAD USER (src/Entity/User.php):
==================================

¿Qué es?
- Es la representación de la tabla "user" en la base de datos
- Define la estructura: qué campos tiene (id, email, roles, password)
- Es como un "molde" o "blueprint" de cómo se ve un usuario

¿Para qué sirve?
- Doctrine usa esta clase para crear y modificar la tabla en la BD
- Cada objeto User representa una fila en la tabla
- Define las relaciones con otras entidades (ej: User tiene muchos Productos)

Características principales:
- Implementa UserInterface (necesario para el sistema de seguridad de Symfony)
- Implementa PasswordAuthenticatedUserInterface (para manejar contraseñas)
- Campos básicos: id, email, roles (array), password (hasheado)
- Los campos se mapean a columnas de la tabla mediante anotaciones/atributos

Ejemplo de uso:
```php
$user = new User();
$user->setEmail('usuario@ejemplo.com');
$user->setPassword($hashedPassword);
$entityManager->persist($user);
$entityManager->flush(); // Se guarda en la BD
```

USERREPOSITORY (src/Repository/UserRepository.php):
==================================================

¿Para qué sirve?
- Permite crear consultas personalizadas sin mezclar lógica con la entidad
- Mantiene el código organizado y reutilizable

Métodos automáticos (heredados):
- find($id) - Buscar por ID
- findAll() - Obtener todos los usuarios
- findBy(['campo' => 'valor']) - Buscar por cualquier campo
- findOneBy(['email' => 'test@test.com']) - Buscar un solo registro

Métodos especiales para autenticación:
- upgradePassword() - Actualiza la contraseña hasheada de un usuario
- Se usa cuando el algoritmo de hash cambia o para funciones de seguridad

¿Cuándo crear métodos personalizados?
Cuando necesitas consultas complejas, por ejemplo:
```php
public function findActiveUsers()
{
    return $this->createQueryBuilder('u')
        ->where('u.isActive = true')
        ->orderBy('u.email', 'ASC')
        ->getQuery()
        ->getResult();
}
```

Ejemplo de uso en un controlador:
```php
// Obtener el repository
$userRepository = $entityManager->getRepository(User::class);

// Buscar un usuario por email
$user = $userRepository->findOneBy(['email' => 'test@test.com']);

// Obtener todos los usuarios
$allUsers = $userRepository->findAll();
```

DIFERENCIA CLAVE:
=================
- Entity (User.php) = QUÉ es un usuario (estructura, campos)
- Repository (UserRepository.php) = CÓMO buscar/consultar usuarios (lógica de consultas)

Esta separación hace el código más limpio, testeable y mantenible.

---

[12/11/2025 09:56:13 p.m.] Comando ejecutado: php bin/console make:auth

Preguntas y respuestas durante la ejecución:

1. What style of authentication do you want? [Empty authenticator]:
   Respuesta: 1 (Login form authenticator)
   
2. The class name of the authenticator to create (e.g. AppCustomAuthenticator):
   Respuesta: LoginFormAuthenticator
   
3. Choose a name for the controller class (e.g. SecurityController):
   Respuesta: SecurityController
   
4. Do you want to generate a '/logout' URL? (yes/no):
   Respuesta: yes
   
5. Do you want to support remember me? (yes/no):
   Respuesta: yes
   
6. How should remember me be activated?:
   [0] Activate when the user checks a box
   [1] Always activate remember me
   Respuesta: 0 (Activate when the user checks a box)

¿Qué se busca?
- Crear el sistema completo de autenticación (login)
- Generar el controlador de seguridad con las rutas de login y logout
- Crear el formulario de inicio de sesión
- Implementar la funcionalidad "Recordarme" con checkbox
- Configurar el authenticator que maneja la lógica de autenticación

Archivos creados/modificados:

Archivos CREADOS:
1. src/Security/LoginFormAuthenticator.php
   - Clase que maneja toda la lógica de autenticación
   - Verifica las credenciales del usuario
   - Redirige después del login exitoso
   - Maneja errores de autenticación

2. src/Controller/SecurityController.php
   - Controlador con las rutas de login y logout
   - Método login() - Muestra el formulario de login
   - Método logout() - Cierra la sesión del usuario

3. templates/security/login.html.twig
   - Plantilla del formulario de inicio de sesión
   - Campos: email, password
   - Checkbox "Recordarme" (remember me)
   - Muestra mensajes de error si las credenciales son incorrectas

Archivos MODIFICADOS:
1. config/packages/security.yaml
   - Configuración del firewall principal
   - Activación del form_login con LoginFormAuthenticator
   - Configuración de logout en la ruta /logout
   - Configuración de remember_me con cookie segura
   - Definición de access control (rutas protegidas)

Resultado:
- Sistema de login completamente funcional
- Ruta /login disponible para iniciar sesión
- Ruta /logout disponible para cerrar sesión
- Funcionalidad "Recordarme" implementada
- Los usuarios ahora pueden autenticarse en la aplicación

Próximo paso:
- Crear el formulario de registro de usuarios (make:registration-form)

---

[12/11/2025 09:59:35 p.m.] Comandos ejecutados: Commit, versionado y push del sistema de login

Comandos:
1. git add .
2. git commit -m "Sistema de login completo: Authenticator, SecurityController y formulario de login"
3. git tag -a v1.2.0 -m "v1.2.0: Sistema de login con remember me y logout implementado"
4. git push origin main
5. git push origin v1.2.0

¿Qué se busca?
- Guardar los cambios del sistema de autenticación completo
- Crear una nueva versión del proyecto (v1.2.0)
- Subir todos los cambios al repositorio remoto en GitHub

Resultado:
- Commit creado exitosamente con hash 03a98fb
- 5 archivos modificados, 323 inserciones
- Archivos creados:
  * crud-symfony/src/Controller/SecurityController.php
  * crud-symfony/src/Security/LoginFormAuthenticator.php
  * crud-symfony/templates/security/login.html.twig
- Tag v1.2.0 creado y subido exitosamente a GitHub
- Sistema de login completo documentado y respaldado

---

[12/11/2025 10:01:32 p.m.] Comando ejecutado: php bin/console make:registration-form

Preguntas y respuestas durante la ejecución:

1. Do you want to add a @UniqueEntity validation annotation on your User class to make sure duplicate accounts aren't created? (yes/no):
   Respuesta: yes
   
2. Do you want to send an email to verify the user's email address after registration? (yes/no):
   Respuesta: no
   
3. Do you want to automatically authenticate the user after registration? (yes/no):
   Respuesta: yes

¿Qué se busca?
- Crear el sistema completo de registro de usuarios
- Generar el controlador de registro con la lógica para crear nuevos usuarios
- Crear el formulario de registro con validaciones
- Validar que los correos electrónicos sean únicos (no duplicados)
- Autenticar automáticamente al usuario después del registro exitoso

Archivos creados/modificados:

Archivos CREADOS:
1. src/Controller/RegistrationController.php
   - Controlador con el método register()
   - Maneja el proceso de registro de nuevos usuarios
   - Hashea la contraseña antes de guardarla
   - Autentica automáticamente al usuario después del registro
   - Redirige a una ruta después del registro exitoso

2. src/Form/RegistrationFormType.php
   - Clase de formulario para el registro
   - Define los campos: email, plainPassword (con confirmación)
   - Validaciones de contraseña
   - Opción de términos y condiciones (agreeTerms)

3. templates/registration/register.html.twig
   - Plantilla del formulario de registro
   - Campos: email, password, repetir password
   - Checkbox para aceptar términos
   - Muestra errores de validación

Archivos MODIFICADOS:
1. src/Entity/User.php
   - Agregada anotación @UniqueEntity para el campo email
   - Asegura que no se puedan crear cuentas duplicadas con el mismo email

Resultado:
- Sistema de registro completamente funcional
- Ruta /register disponible para crear nuevas cuentas
- Validación de emails únicos implementada
- Los usuarios se autentican automáticamente después de registrarse
- Hash seguro de contraseñas antes de guardarlas en la BD
- Formulario con validaciones de contraseña y confirmación

Próximo paso:
- Crear la entidad Producto con campos: nombre, precio, fecha y relación con User

---

[12/11/2025 10:02:41 p.m.] Comandos ejecutados: Commit, versionado y push del sistema de registro

Comandos:
1. git add .
2. git commit -m "Sistema de registro completo: RegistrationController y formulario con validaciones"
3. git tag -a v1.3.0 -m "v1.3.0: Sistema de registro con autenticación automática y validación de emails únicos"
4. git push origin main
5. git push origin v1.3.0

¿Qué se busca?
- Guardar los cambios del sistema de registro completo
- Crear una nueva versión del proyecto (v1.3.0)
- Subir todos los cambios al repositorio remoto en GitHub

Resultado:
- Commit creado exitosamente con hash 149f9cc
- 5 archivos modificados, 207 inserciones
- Archivos creados:
  * crud-symfony/src/Controller/RegistrationController.php
  * crud-symfony/src/Form/RegistrationFormType.php
  * crud-symfony/templates/registration/register.html.twig
- Tag v1.3.0 creado y subido exitosamente a GitHub
- Sistema de registro completo documentado y respaldado
- Usuarios ahora pueden registrarse y autenticarse automáticamente

---

[12/11/2025 10:05:40 p.m.] Mejora: Enlaces entre Login y Registro

Archivos a modificar manualmente:

1. Archivo: templates/security/login.html.twig
   Agregar después del botón "Sign in":
   
   ```twig
   <p>
       ¿No tienes cuenta? <a href="{{ path('app_register') }}">Regístrate aquí</a>
   </p>
   ```

2. Archivo: templates/registration/register.html.twig
   Agregar después del botón "Register":
   
   ```twig
   <p>
       ¿Ya tienes cuenta? <a href="{{ path('app_login') }}">Inicia sesión aquí</a>
   </p>
   ```

¿Qué se busca?
- Mejorar la experiencia de usuario (UX)
- Permitir navegación fácil entre login y registro
- Evitar que los usuarios se queden atrapados en una sola página
- Proporcionar enlaces claros para nuevos usuarios y usuarios existentes

Resultado esperado:
- En la página de login: enlace "Regístrate aquí" que lleva a /register
- En la página de registro: enlace "Inicia sesión aquí" que lleva a /login
- Navegación fluida entre ambas páginas

Nota: No existe comando de Symfony para esto, debe hacerse manualmente editando las plantillas Twig.

---

[12/11/2025 10:07:16 p.m.] Comandos ejecutados: Commit, versionado y push de mejoras UX

Comandos:
1. git add .
2. git commit -m "Mejora UX: Enlaces de navegación entre login y registro"
3. git tag -a v1.3.1 -m "v1.3.1: Mejora de navegación - Enlaces entre login y registro"
4. git push origin main
5. git push origin v1.3.1

¿Qué se busca?
- Guardar las mejoras de navegación entre login y registro
- Crear una nueva versión del proyecto (v1.3.1)
- Subir todos los cambios al repositorio remoto en GitHub

Resultado:
- Commit creado exitosamente con hash 1cfc732
- 3 archivos modificados, 74 inserciones
- Archivos modificados:
  * crud-symfony/templates/security/login.html.twig (enlace a registro)
  * crud-symfony/templates/registration/register.html.twig (enlace a login)
  * registro_actividades.txt
- Tag v1.3.1 creado y subido exitosamente a GitHub
- Mejora de experiencia de usuario documentada y respaldada

---

[12/11/2025 10:11:27 p.m.] Comando ejecutado: php bin/console make:entity Categoria

Preguntas y respuestas durante la ejecución:

Campo 1 - nombre:
- New property name (press <return> to stop adding fields): nombre
- Field type (enter ? to see all types): string
- Field length [255]: (presionar Enter para default)
- Can this field be null in the database (nullable) (yes/no) [no]: no

- Add another property? (presionar Enter para terminar)

¿Qué se busca?
- Crear la entidad Categoria antes de Producto
- Permitir que los productos tengan categorías (mejor organización)
- Enseñar relaciones múltiples en una entidad
- Crear un ejemplo más realista de aplicación

Archivos creados:
1. src/Entity/Categoria.php
   - Entidad con campos: id, nombre
   - Representa una categoría de productos
   - Tendrá relación OneToMany con Producto

2. src/Repository/CategoriaRepository.php
   - Repositorio para consultas de categorías
   - Métodos para buscar y gestionar categorías

Resultado:
- Entidad Categoria creada exitosamente
- Campo nombre tipo string(255) configurado
- Repository generado automáticamente
- Lista para crear la relación con Producto

Próximo paso:
- Crear la entidad Producto con relaciones a User y Categoria

---

[12/11/2025 10:17:07 p.m.] Comando ejecutado: php bin/console make:controller HomeController

¿Qué se busca?
- Crear una página de inicio (home) para la aplicación
- Tener una ruta principal donde redirigir después del login exitoso
- Proporcionar un punto de entrada para usuarios autenticados

Archivos creados:
1. src/Controller/HomeController.php
   - Controlador con método index()
   - Ruta por defecto: /home
   - Renderiza la plantilla home/index.html.twig

2. templates/home/index.html.twig
   - Plantilla de la página de inicio
   - Extiende de base.html.twig
   - Contenido básico de bienvenida

Resultado:
- Página de inicio creada exitosamente
- Ruta /home disponible
- Lista para usar como redirección después del login

Próximo paso:
- Modificar LoginFormAuthenticator para redirigir a la ruta home después del login exitoso

---

[12/11/2025 10:17:42 p.m.] Modificación: LoginFormAuthenticator - Redirección a home

Archivo modificado: src/Security/LoginFormAuthenticator.php

Cambio realizado:
- Línea 54: Cambiado de `app_login` a `app_home`
- return new RedirectResponse($this->urlGenerator->generate('app_home'));

¿Qué se busca?
- Corregir el error "TODO: provide a valid redirect"
- Redirigir a la página de inicio después de un login exitoso
- Evitar el loop de login → login
- Proporcionar mejor experiencia de usuario

Resultado:
- LoginFormAuthenticator ahora redirige correctamente a /home
- Error HTTP 500 solucionado
- Usuarios autenticados verán la página de inicio después del login
- Registro de usuarios funciona correctamente

---

[12/11/2025 10:20:31 p.m.] Modificación: Moviendo mensaje de usuario a home

Archivos modificados:

1. templates/home/index.html.twig
   - Agregado bloque de usuario logueado al inicio
   - Muestra email del usuario y enlace de logout
   - Mejor ubicación para esta información

2. templates/security/login.html.twig
   - Eliminado bloque de usuario logueado
   - El login solo debe mostrar el formulario
   - Si ya está logueado, será redirigido a home

¿Qué se busca?
- Mejorar la lógica de la interfaz
- Separar correctamente login (para no autenticados) de home (para autenticados)
- Mostrar información del usuario en la página principal, no en login
- Mejor experiencia de usuario

Resultado:
- Página de login más limpia y enfocada
- Página home muestra información del usuario logueado
- Enlace de logout disponible en home
- Separación lógica correcta entre páginas públicas y privadas

---

[12/11/2025 10:21:32 p.m.] Comandos ejecutados: Commit, versionado y push

Comandos:
1. git add .
2. git commit -m "HomeController creado, redirección corregida y mejoras UX en login/home"
3. git tag -a v1.4.0 -m "v1.4.0: HomeController, Categoria y correcciones de redirección"
4. git push origin main
5. git push origin v1.4.0

¿Qué se busca?
- Guardar todos los cambios realizados (HomeController, Categoria, correcciones)
- Crear nueva versión del proyecto (v1.4.0)
- Subir cambios al repositorio remoto en GitHub

Resultado:
- Commit creado exitosamente con hash 35a25d0
- 7 archivos modificados, 268 inserciones
- Archivos principales:
  * crud-symfony/src/Controller/HomeController.php (nuevo)
  * crud-symfony/src/Entity/Categoria.php (nuevo)
  * crud-symfony/src/Repository/CategoriaRepository.php (nuevo)
  * crud-symfony/templates/home/index.html.twig (nuevo)
  * crud-symfony/src/Security/LoginFormAuthenticator.php (modificado)
  * crud-symfony/templates/security/login.html.twig (modificado)
- Tag v1.4.0 creado y subido exitosamente a GitHub
- Sistema de autenticación completamente funcional

Próximo paso:
- Crear la entidad Producto con relaciones a User y Categoria

---

[12/11/2025 10:24:44 p.m.] Configuración: Redirección del logout a login

Archivo modificado: config/packages/security.yaml

Cambio realizado:
En la sección logout, agregada la línea:
```yaml
logout:
    path: app_logout
    target: app_login
```

¿Qué se busca?
- Redirigir al usuario a la página de login después de hacer logout
- Mejor experiencia de usuario (después de cerrar sesión, ver el login)
- Evitar que quede en una página que requiere autenticación

Resultado:
- Logout ahora redirige a /login automáticamente
- Usuario ve el formulario de login después de cerrar sesión
- Comportamiento estándar de aplicaciones web

---

[12/11/2025 10:24:44 p.m.] Comandos ejecutados: Migración de Categoria

Comandos:
1. php bin/console make:migration
2. php bin/console doctrine:migrations:migrate

¿Qué se busca?
- Crear el archivo de migración para la tabla categoria
- Ejecutar la migración para crear la tabla en la base de datos
- Preparar la base de datos para la entidad Categoria

Resultado:
- Archivo de migración creado en migrations/
- Migración ejecutada exitosamente
- Tabla `categoria` creada en la base de datos con campos:
  * id (int, auto_increment, primary key)
  * nombre (varchar 255, not null)
- Base de datos actualizada y lista para usar Categoria

Próximo paso:
- Crear la entidad Producto con relaciones a User y Categoria

---

[12/11/2025 10:26:33 p.m.] Comandos ejecutados: Commit, versionado y push

Comandos:
1. git add .
2. git commit -m "Logout redirige a login y migración de Categoria ejecutada"
3. git tag -a v1.4.1 -m "v1.4.1: Logout a login y tabla Categoria en BD"
4. git push origin main
5. git push origin v1.4.1

¿Qué se busca?
- Guardar los cambios de configuración de logout y migración de Categoria
- Crear nueva versión del proyecto (v1.4.1)
- Subir cambios al repositorio remoto en GitHub

Resultado:
- Commit creado exitosamente con hash 407df6f
- 3 archivos modificados, 112 inserciones
- Archivos principales:
  * config/packages/security.yaml (logout target configurado)
  * crud-symfony/migrations/Version20251113022359.php (migración de Categoria)
  * registro_actividades.txt (documentación actualizada)
- Tag v1.4.1 creado y subido exitosamente a GitHub
- Tabla categoria creada en la base de datos
- Sistema de logout mejorado

Próximo paso:
- Crear la entidad Producto con relaciones a User y Categoria

---

[13/11/2025 03:30:37 p.m.] Comando ejecutado: php bin/console make:entity Producto

Preguntas y respuestas durante la ejecución:

Campo 1 - nombre:
- New property name: nombre
- Field type: string
- Field length [255]: (Enter para default)
- Can this field be null in the database (nullable) [no]: no

Campo 2 - precio:
- New property name: precio
- Field type: decimal
- Precision (total number of digits stored) [10]: 10
- Scale (number of decimals to store) [0]: 2
- Can this field be null in the database (nullable) [no]: no

Campo 3 - fecha:
- New property name: fecha
- Field type: datetime
- Can this field be null in the database (nullable) [no]: no

Campo 4 - categoria (relación):
- New property name: categoria
- Field type: relation
- What class should this entity be related to?: Categoria
- Relation type? [ManyToOne, OneToMany, ManyToMany, OneToOne]: ManyToOne
- Is the Producto.categoria property allowed to be null (nullable)? [yes]: no
- Do you want to add a new property to Categoria to access/update Producto objects? [yes]: yes
- New field name inside Categoria [productos]: (Enter para default)
- Do you want to automatically delete orphaned App\Entity\Producto objects (orphanRemoval)? [no]: no

Campo 5 - user (relación):
- New property name: user
- Field type: relation
- What class should this entity be related to?: User
- Relation type? [ManyToOne, OneToMany, ManyToMany, OneToOne]: ManyToOne
- Is the Producto.user property allowed to be null (nullable)? [yes]: no
- Do you want to add a new property to User to access/update Producto objects? [yes]: yes
- New field name inside User [productos]: (Enter para default)
- Do you want to automatically delete orphaned App\Entity\Producto objects (orphanRemoval)? [no]: no

- Add another property?: (Enter vacío para terminar)

¿Qué se busca?
- Crear la entidad Producto con todos sus campos
- Establecer relaciones ManyToOne con Categoria y User
- Cada producto pertenece a una categoría y un usuario
- Permitir acceso bidireccional (User->productos, Categoria->productos)
- No activar orphanRemoval para permitir cambios de categoría/usuario sin eliminar productos

Archivos creados/modificados:

Archivos CREADOS:
1. src/Entity/Producto.php
   - Entidad con campos: id, nombre, precio, fecha
   - Relación ManyToOne con Categoria
   - Relación ManyToOne con User
   - Getters y setters para todos los campos

2. src/Repository/ProductoRepository.php
   - Repositorio para consultas de productos
   - Métodos para buscar y gestionar productos

Archivos MODIFICADOS:
1. src/Entity/Categoria.php
   - Agregada propiedad $productos (OneToMany)
   - Métodos addProducto() y removeProducto()
   - Relación bidireccional con Producto

2. src/Entity/User.php
   - Agregada propiedad $productos (OneToMany)
   - Métodos addProducto() y removeProducto()
   - Relación bidireccional con Producto

Resultado:
- Entidad Producto creada con 5 campos (id, nombre, precio, fecha, categoria, user)
- Relaciones ManyToOne correctamente establecidas
- Acceso bidireccional configurado
- Repository generado automáticamente
- Listo para crear la migración

Próximo paso:
- Crear y ejecutar la migración de Producto

---

[13/11/2025 03:37:14 p.m.] Comandos ejecutados: Migración de Producto

Comandos:
1. php bin/console make:migration
2. php bin/console doctrine:migrations:migrate

¿Qué se busca?
- Crear el archivo de migración para la tabla producto
- Ejecutar la migración para crear la tabla en la base de datos
- Crear las foreign keys hacia categoria y user
- Preparar la base de datos para almacenar productos

Resultado:
- Archivo de migración creado en migrations/
- Migración ejecutada exitosamente
- Tabla `producto` creada en la base de datos con campos:
  * id (int, auto_increment, primary key)
  * nombre (varchar 255, not null)
  * precio (decimal 10,2, not null)
  * fecha (datetime, not null)
  * categoria_id (int, not null, foreign key -> categoria.id)
  * user_id (int, not null, foreign key -> user.id)
- Foreign keys configuradas correctamente
- Índices creados en categoria_id y user_id
- Base de datos lista para gestionar productos con relaciones

Próximo paso:
- Generar el CRUD de productos con make:crud

---

[13/11/2025 03:38:39 p.m.] Comandos ejecutados: Commit, versionado y push de Producto

Comandos:
1. git add .
2. git commit -m "Entidad Producto: Creación completa con relaciones ManyToOne a User y Categoria..."
3. git tag -a v1.5.0 -m "v1.5.0: Entidad Producto completa con relaciones..."
4. git push origin main
5. git push origin v1.5.0

¿Qué se busca?
- Guardar todos los cambios de la entidad Producto y su migración
- Crear una nueva versión del proyecto (v1.5.0)
- Documentar detalladamente las relaciones y estructura
- Subir cambios al repositorio remoto en GitHub

Resultado:
- Commit creado exitosamente con hash 69d8c1d
- 6 archivos modificados, 410 inserciones
- Archivos principales:
  * crud-symfony/src/Entity/Producto.php (nueva entidad)
  * crud-symfony/src/Repository/ProductoRepository.php (nuevo repository)
  * crud-symfony/migrations/Version20251113193359.php (migración)
  * crud-symfony/src/Entity/Categoria.php (relación OneToMany agregada)
  * crud-symfony/src/Entity/User.php (relación OneToMany agregada)
  * registro_actividades.txt (documentación actualizada)
- Tag v1.5.0 creado con descripción completa de características
- Cambios subidos exitosamente a GitHub
- Sistema listo para generar CRUD de productos

Próximo paso:
- Generar el CRUD de productos con make:crud

---

[13/11/2025 03:47:18 p.m.] Modificación: Registro basado en roles (primer usuario ADMIN, resto USER)

Archivo modificado:
- crud-symfony/src/Controller/RegistrationController.php

¿Qué se busca?
- Implementar lógica de asignación de roles automática durante el registro
- El primer usuario registrado en el sistema recibe el rol ROLE_ADMIN
- Todos los usuarios posteriores reciben el rol ROLE_USER
- Mejorar la seguridad y gestión de permisos del sistema

Cambios realizados en RegistrationController.php:
1. Se inyectó UserRepository en el constructor del controlador
2. Se agregó variable privada $userRepository en el controlador
3. Se modificó el método register() para incluir lógica de roles:
   - Se cuenta la cantidad de usuarios existentes con $this->userRepository->count([])
   - Si el conteo es 0 (primer usuario): se asigna ['ROLE_ADMIN']
   - Si hay usuarios existentes: se asigna ['ROLE_USER']
   - Se aplica el rol al usuario antes de guardar con $user->setRoles($role)

Código implementado:
```php
// Determinar el rol según si es el primer usuario
$userCount = $this->userRepository->count([]);
$role = ($userCount === 0) ? ['ROLE_ADMIN'] : ['ROLE_USER'];
$user->setRoles($role);
```

Resultado:
- Sistema de roles automático funcionando correctamente
- Primer usuario registrado tendrá privilegios de administrador
- Usuarios subsecuentes tendrán privilegios estándar
- Base para implementar control de acceso basado en roles (RBAC)
- No requiere intervención manual para asignar roles

Beneficios:
- Seguridad mejorada con separación de privilegios
- Experiencia de usuario simplificada (no requiere elegir rol)
- Base sólida para futuras restricciones de acceso a CRUDs
- Preparación para access_control en security.yaml

Próximo paso:
- Hacer commit y versionar estos cambios
- Generar el CRUD de productos con make:crud

---

[13/11/2025 03:48:52 p.m.] Comandos ejecutados: Commit, versionado y push del sistema de roles

Comandos:
1. git add .
2. git commit -m "Sistema de roles automático: Primer usuario ADMIN, usuarios posteriores USER..."
3. git tag -a v1.6.0 -m "v1.6.0: Sistema de roles automático..."
4. git push origin main
5. git push origin v1.6.0

¿Qué se busca?
- Guardar todos los cambios del sistema de roles automático
- Crear una nueva versión del proyecto (v1.6.0)
- Documentar la funcionalidad de asignación automática de roles
- Subir cambios al repositorio remoto en GitHub

Resultado:
- Commit creado exitosamente con hash 747af2a
- 3 archivos modificados, 97 inserciones, 1 eliminación
- Archivos principales:
  * crud-symfony/src/Controller/RegistrationController.php (lógica de roles)
  * registro_actividades.txt (documentación actualizada)
- Tag v1.6.0 creado con descripción completa de características
- Cambios subidos exitosamente a GitHub
- Sistema listo con control automático de roles

Versiones del proyecto hasta ahora:
- v1.0.0: Inicialización de proyecto Symfony 7.1
- v1.1.0: Entidad User y migración de autenticación
- v1.2.0: LoginFormAuthenticator con remember me
- v1.3.0: RegistrationController con auto-autenticación
- v1.3.1: Links de navegación entre login y registro
- v1.4.0: HomeController y entidad Categoria
- v1.4.1: Redirect de logout y migración de Categoria
- v1.5.0: Entidad Producto con relaciones ManyToOne
- v1.6.0: Sistema de roles automático (ADMIN/USER)

Próximo paso:
- Generar el CRUD de productos con make:crud

---

[13/11/2025 03:52:40 p.m.] Modificaciones: Redirección de raíz a login y eliminación de fondo azul

Archivos modificados:
- crud-symfony/config/routes.yaml
- crud-symfony/templates/base.html.twig

¿Qué se busca?
- Redirigir automáticamente la ruta raíz (/) al formulario de login
- Eliminar el fondo azul por defecto de SimpleCSS
- Mejorar la experiencia de usuario con redirección automática
- Mantener un diseño limpio con fondo blanco

Cambios realizados:

1. routes.yaml - Redirección de raíz:
```yaml
# Redireccionar raíz a login
index:
    path: /
    controller: Symfony\Bundle\FrameworkBundle\Controller\RedirectController
    defaults:
        route: 'app_login'
        permanent: false
```

Explicación:
- Se usa RedirectController de Symfony Framework Bundle
- La ruta / redirige a app_login (ruta del login)
- permanent: false indica una redirección 302 (temporal)
- Los usuarios que accedan a la raíz serán enviados automáticamente al login

2. base.html.twig - Eliminación de fondo azul:
```twig
{% block stylesheets %}
<style>
    /* Sobreescribir el fondo azul de SimpleCSS */
    body {
        background-color: #fff !important;
    }
</style>
{% endblock %}
```

Explicación:
- Se agrega CSS inline en el bloque stylesheets
- background-color: #fff !important sobreescribe el fondo azul de SimpleCSS
- El !important asegura que el estilo personalizado tenga prioridad
- Resultado: fondo blanco limpio en todas las páginas

Resultado:
- Usuarios que accedan a / son redirigidos automáticamente a /login
- Fondo blanco aplicado en toda la aplicación
- SimpleCSS mantiene sus estilos de tipografía, formularios y componentes
- Mejor experiencia visual sin el fondo azul por defecto

Beneficios:
- No es necesario memorizar la ruta /login
- Diseño más limpio y profesional
- Mantiene la simplicidad de SimpleCSS sin su tema de color
- Fácil de personalizar cambiando el valor de background-color

Próximo paso:
- Hacer commit de estos cambios
- Generar el CRUD de productos con make:crud

---

[13/11/2025 03:58:23 p.m.] Actualización: Redirección mediante controlador en lugar de routes.yaml

Archivo modificado:
- crud-symfony/src/Controller/HomeController.php

¿Qué se busca?
- Implementar la redirección de / a login usando un método en el controlador
- Evitar configurar rutas estáticas en routes.yaml
- Mantener la lógica de redirección en el código PHP (mejor práctica)
- Mayor flexibilidad y mantenibilidad del código

Cambio realizado en HomeController.php:

Se agregó un nuevo método root() con la ruta /:
```php
#[Route('/', name: 'app_root')]
public function root(): RedirectResponse
{
    return $this->redirectToRoute('app_login');
}
```

Explicación:
- Se usa el atributo #[Route('/', name: 'app_root')] para definir la ruta raíz
- El método root() retorna un RedirectResponse
- $this->redirectToRoute('app_login') redirige a la ruta del login
- Se agregó use Symfony\Component\HttpFoundation\RedirectResponse al inicio del archivo
- El HomeController ahora maneja dos rutas: /home y /

Ventajas de este método vs routes.yaml:
- Lógica en PHP en lugar de configuración YAML
- Más fácil de encontrar y mantener (todo en un mismo controlador)
- Permite agregar lógica adicional si se necesita en el futuro
- Sigue las mejores prácticas de Symfony con atributos PHP 8
- No requiere el RedirectController de Symfony

Resultado:
- Los usuarios que accedan a / son redirigidos automáticamente a /login
- La ruta /home sigue funcionando normalmente para usuarios autenticados
- Implementación más limpia y orientada a objetos

Próximo paso:
- Hacer commit de estos cambios
- Generar el CRUD de productos con make:crud

---

[13/11/2025 04:01:56 p.m.] Comandos ejecutados: Commit, versionado y push de mejoras UX

Comandos:
1. git add .
2. git commit -m "Mejoras UX: Redirección mediante controlador y fondo blanco personalizado"
3. git tag -a v1.6.1 -m "v1.6.1: Mejoras de experiencia de usuario"
4. git push origin main
5. git push origin v1.6.1

¿Qué se busca?
- Guardar los cambios de redirección mediante HomeController
- Guardar el cambio de fondo blanco en base.html.twig
- Crear una nueva versión del proyecto (v1.6.1)
- Documentar las mejoras de experiencia de usuario
- Subir cambios al repositorio remoto en GitHub

Cambios incluidos en este commit:
- HomeController con método root() para redirigir / a login
- CSS personalizado para fondo blanco (sobreescribe SimpleCSS)
- Documentación actualizada en registro_actividades.txt

Próximo paso:
- Generar el CRUD de productos con make:crud

---

[13/11/2025 04:02:45 p.m.] Resultado del commit y versionado

Resultado:
- Commit creado exitosamente con hash 92e69dc
- 4 archivos modificados, 202 inserciones
- Archivos principales:
  * crud-symfony/src/Controller/HomeController.php (método root agregado)
  * crud-symfony/templates/base.html.twig (CSS personalizado)
  * crud-symfony/config/routes.yaml (limpiado de RedirectController)
  * registro_actividades.txt (documentación completa)
- Tag v1.6.1 creado con descripción de mejoras UX
- Cambios subidos exitosamente a GitHub
- Sistema con mejor experiencia de usuario

Versiones del proyecto actualizadas:
- v1.0.0: Inicialización de proyecto Symfony 7.1
- v1.1.0: Entidad User y migración de autenticación
- v1.2.0: LoginFormAuthenticator con remember me
- v1.3.0: RegistrationController con auto-autenticación
- v1.3.1: Links de navegación entre login y registro
- v1.4.0: HomeController y entidad Categoria
- v1.4.1: Redirect de logout y migración de Categoria
- v1.5.0: Entidad Producto con relaciones ManyToOne
- v1.6.0: Sistema de roles automático (ADMIN/USER)
- v1.6.1: Mejoras UX (redirección mediante controlador y fondo blanco)

Próximo paso:
- Generar el CRUD de productos con make:crud

---

[13/11/2025 04:03:58 p.m.] Comando ejecutado: php bin/console make:crud Categoria

Preguntas y respuestas durante la ejecución:

1. Choose a name for your controller class (e.g. CategoriaController) [CategoriaController]:
   Respuesta: (Enter para aceptar default)

2. Do you want to generate PHPUnit tests? [Experimental] (yes/no) [no]:
   Respuesta: no

¿Qué se busca?
- Generar automáticamente el CRUD completo para la entidad Categoria
- Crear el controlador con todos los métodos (index, new, show, edit, delete)
- Crear el formulario de Categoria
- Crear todas las plantillas Twig necesarias
- Tener un sistema completo para gestionar categorías

Archivos CREADOS:

1. src/Controller/CategoriaController.php
   - Controlador con 5 métodos principales:
   - index() - Lista todas las categorías (ruta: /categoria/)
   - new() - Crear nueva categoría (ruta: /categoria/new)
   - show() - Ver detalles de una categoría (ruta: /categoria/{id})
   - edit() - Editar categoría existente (ruta: /categoria/{id}/edit)
   - delete() - Eliminar categoría (ruta: /categoria/{id})

2. src/Form/CategoriaType.php
   - Clase de formulario para Categoria
   - Define los campos del formulario (nombre)
   - Configuración automática basada en la entidad

3. templates/categoria/index.html.twig
   - Plantilla para listar todas las categorías
   - Tabla con las categorías y botones de acciones
   - Enlaces a crear, ver, editar y eliminar

4. templates/categoria/new.html.twig
   - Plantilla para crear nueva categoría
   - Renderiza el formulario de CategoriaType
   - Botón para guardar y enlace para volver al listado

5. templates/categoria/show.html.twig
   - Plantilla para mostrar detalles de una categoría
   - Muestra todos los campos de la categoría
   - Enlaces a editar, eliminar y volver al listado

6. templates/categoria/edit.html.twig
   - Plantilla para editar categoría existente
   - Renderiza el formulario con datos pre-cargados
   - Botones para guardar cambios y volver

7. templates/categoria/_form.html.twig
   - Partial del formulario reutilizable
   - Usado en new.html.twig y edit.html.twig
   - Evita duplicación de código

8. templates/categoria/_delete_form.html.twig
   - Partial del formulario de eliminación
   - Botón para confirmar eliminación
   - Usado en show.html.twig y edit.html.twig

Resultado:
- CRUD de Categoria completamente funcional
- Ruta principal: /categoria/
- Sistema completo: crear, leer, actualizar y eliminar categorías
- Formularios con validaciones automáticas
- Interfaz con SimpleCSS aplicado automáticamente
- Flash messages para operaciones exitosas
- Confirmación antes de eliminar

Funcionalidades incluidas:
- Listar todas las categorías en tabla
- Crear nuevas categorías con validación
- Ver detalles de cada categoría
- Editar categorías existentes
- Eliminar categorías con confirmación
- Redirecciones apropiadas después de cada operación
- Mensajes de éxito/error (flash messages)

Próximo paso:
- Probar el CRUD accediendo a /categoria/
- Crear algunas categorías de ejemplo
- Hacer commit y versionar estos cambios

---

[13/11/2025 04:05:41 p.m.] Prueba del CRUD de Categoria

Resultado de la prueba:
- CRUD de Categoria probado y funcionando correctamente
- Ruta /categoria/ accesible y operativa
- Todas las operaciones CRUD verificadas:
  * Listar categorías (index)
  * Crear nueva categoría (new)
  * Ver detalles (show)
  * Editar categoría (edit)
  * Eliminar categoría (delete)
- Formularios renderizados correctamente con SimpleCSS
- Validaciones funcionando
- Flash messages operativos
- Redirecciones correctas después de cada operación

Próximo paso:
- Hacer commit y versionar el CRUD de Categoria

---

[13/11/2025 04:06:31 p.m.] Comandos ejecutados: Commit, versionado y push del CRUD de Categoria

Comandos:
1. git add .
2. git commit -m "CRUD de Categoria: Sistema completo de gestión de categorías..."
3. git tag -a v1.7.0 -m "v1.7.0: CRUD de Categoria implementado..."
4. git push origin main
5. git push origin v1.7.0

¿Qué se busca?
- Guardar todos los archivos generados por make:crud
- Crear una nueva versión del proyecto (v1.7.0)
- Documentar el sistema CRUD de Categoria
- Subir cambios al repositorio remoto en GitHub

Resultado:
- Commit creado exitosamente con hash 54cce8d
- 9 archivos modificados/creados, 338 inserciones
- Archivos principales:
  * crud-symfony/src/Controller/CategoriaController.php (nuevo)
  * crud-symfony/src/Form/CategoriaType.php (nuevo)
  * crud-symfony/templates/categoria/*.html.twig (6 templates nuevos)
  * registro_actividades.txt (documentación actualizada)
- Tag v1.7.0 creado con descripción completa
- Cambios subidos exitosamente a GitHub
- Sistema CRUD de Categoria completo y operativo

Versiones del proyecto actualizadas:
- v1.0.0: Inicialización de proyecto Symfony 7.1
- v1.1.0: Entidad User y migración de autenticación
- v1.2.0: LoginFormAuthenticator con remember me
- v1.3.0: RegistrationController con auto-autenticación
- v1.3.1: Links de navegación entre login y registro
- v1.4.0: HomeController y entidad Categoria
- v1.4.1: Redirect de logout y migración de Categoria
- v1.5.0: Entidad Producto con relaciones ManyToOne
- v1.6.0: Sistema de roles automático (ADMIN/USER)
- v1.6.1: Mejoras UX (redirección mediante controlador y fondo blanco)
- v1.7.0: CRUD de Categoria implementado y funcional

Próximo paso:
- Generar el CRUD de Producto con make:crud

---

[13/11/2025 04:10:56 p.m.] Comando ejecutado: php bin/console make:crud Producto

Preguntas y respuestas durante la ejecución:

1. Choose a name for your controller class (e.g. ProductoController) [ProductoController]:
   Respuesta: ProductoController (Enter para aceptar default)

2. Do you want to generate PHPUnit tests? [Experimental] (yes/no) [no]:
   Respuesta: no

¿Qué se busca?
- Generar automáticamente el CRUD completo para la entidad Producto
- Crear el controlador con todos los métodos (index, new, show, edit, delete)
- Crear el formulario de Producto con campos y relaciones
- Crear todas las plantillas Twig necesarias
- Tener un sistema completo para gestionar productos con sus categorías y usuarios

Archivos CREADOS:

1. src/Controller/ProductoController.php
   - Controlador con 5 métodos principales:
   - index() - Lista todos los productos (ruta: /producto/)
   - new() - Crear nuevo producto (ruta: /producto/new)
   - show() - Ver detalles de un producto (ruta: /producto/{id})
   - edit() - Editar producto existente (ruta: /producto/{id}/edit)
   - delete() - Eliminar producto (ruta: /producto/{id})

2. src/Form/ProductoType.php
   - Clase de formulario para Producto
   - Define los campos: nombre, precio, fecha, categoria, user
   - Configuración automática basada en la entidad
   - EntityType para las relaciones (categoria y user)

3. templates/producto/index.html.twig
   - Plantilla para listar todos los productos
   - Tabla con productos y sus relaciones
   - Botones de acciones para cada producto
   - Enlaces a crear, ver, editar y eliminar

4. templates/producto/new.html.twig
   - Plantilla para crear nuevo producto
   - Renderiza el formulario de ProductoType
   - Selects para categoria y user
   - Botón para guardar y enlace para volver al listado

5. templates/producto/show.html.twig
   - Plantilla para mostrar detalles de un producto
   - Muestra todos los campos incluyendo relaciones
   - Enlaces a editar, eliminar y volver al listado

6. templates/producto/edit.html.twig
   - Plantilla para editar producto existente
   - Renderiza el formulario con datos pre-cargados
   - Botones para guardar cambios y volver

7. templates/producto/_form.html.twig
   - Partial del formulario reutilizable
   - Usado en new.html.twig y edit.html.twig
   - Campos: nombre, precio, fecha, categoria, user
   - Evita duplicación de código

8. templates/producto/_delete_form.html.twig
   - Partial del formulario de eliminación
   - Botón para confirmar eliminación con CSRF
   - Usado en show.html.twig y edit.html.twig

Resultado:
- CRUD de Producto completamente funcional
- Ruta principal: /producto/
- Sistema completo: crear, leer, actualizar y eliminar productos
- Formularios con validaciones automáticas
- Relaciones ManyToOne con Categoria y User manejadas automáticamente
- Selects dropdown para elegir categoría y usuario
- Interfaz con SimpleCSS aplicado automáticamente
- Flash messages para operaciones exitosas
- Confirmación antes de eliminar
- CSRF protection en todas las operaciones

Funcionalidades incluidas:
- Listar todos los productos con categoría y usuario
- Crear nuevos productos asignando categoría y usuario
- Ver detalles completos de cada producto
- Editar productos existentes
- Eliminar productos con confirmación
- Validaciones de campos (nombre, precio, fecha requeridos)
- Validaciones de relaciones (categoria y user obligatorios)
- Redirecciones apropiadas después de cada operación
- Mensajes de éxito/error (flash messages)

Próximo paso:
- Probar el CRUD accediendo a /producto/
- Crear algunos productos de ejemplo
- Verificar las relaciones con Categoria y User
- Hacer commit y versionar estos cambios

---

[13/11/2025 04:12:26 p.m.] Preparación para commit del CRUD de Producto

¿Qué se busca?
- Guardar todos los archivos generados por make:crud Producto
- Crear una nueva versión del proyecto (v1.8.0)
- Documentar el sistema CRUD de Producto con relaciones
- Subir cambios al repositorio remoto en GitHub

Archivos a incluir en el commit:
- ProductoController.php con 5 métodos CRUD
- ProductoType.php con formulario y relaciones
- 6 plantillas Twig para todas las vistas
- Registro de actividades actualizado

Próximo paso:
- Ejecutar git add, commit, tag y push

---

[13/11/2025 04:13:11 p.m.] Comandos ejecutados: Commit, versionado y push del CRUD de Producto

Comandos:
1. git add .
2. git commit -m "CRUD de Producto: Sistema completo de gestión de productos con relaciones..."
3. git tag -a v1.8.0 -m "v1.8.0: CRUD de Producto con relaciones implementado..."
4. git push origin main
5. git push origin v1.8.0

¿Qué se busca?
- Guardar todos los archivos generados por make:crud Producto
- Crear una nueva versión del proyecto (v1.8.0)
- Documentar el sistema CRUD de Producto con relaciones
- Subir cambios al repositorio remoto en GitHub

Resultado:
- Commit creado exitosamente con hash 7564658
- 10 archivos modificados/creados, 386 inserciones, 1 eliminación
- Archivos principales:
  * crud-symfony/src/Controller/ProductoController.php (nuevo)
  * crud-symfony/src/Form/ProductoType.php (nuevo)
  * crud-symfony/templates/producto/*.html.twig (6 templates nuevos)
  * registro_actividades.txt (documentación actualizada)
- Tag v1.8.0 creado con descripción completa
- Cambios subidos exitosamente a GitHub
- Sistema CRUD de Producto completo y operativo con relaciones

Versiones del proyecto actualizadas:
- v1.0.0: Inicialización de proyecto Symfony 7.1
- v1.1.0: Entidad User y migración de autenticación
- v1.2.0: LoginFormAuthenticator con remember me
- v1.3.0: RegistrationController con auto-autenticación
- v1.3.1: Links de navegación entre login y registro
- v1.4.0: HomeController y entidad Categoria
- v1.4.1: Redirect de logout y migración de Categoria
- v1.5.0: Entidad Producto con relaciones ManyToOne
- v1.6.0: Sistema de roles automático (ADMIN/USER)
- v1.6.1: Mejoras UX (redirección mediante controlador y fondo blanco)
- v1.7.0: CRUD de Categoria implementado y funcional
- v1.8.0: CRUD de Producto con relaciones implementado y funcional

Estado actual del proyecto:
- Sistema de autenticación completo (login, registro, logout)
- Sistema de roles automático (primer usuario ADMIN)
- Entidades: User, Categoria, Producto con relaciones
- CRUD completo de Categoria
- CRUD completo de Producto con relaciones a Categoria y User
- Interfaz con SimpleCSS
- Base de datos con todas las tablas y relaciones

Próximo paso según contexto.txt:
- Instalar sistema de API (API Platform o configuración manual)
- Crear CRUD de User con salida JSON (estilo API)

---

[13/11/2025 04:41:31 p.m.] Mejoras en formulario de Producto: Campo user condicional y labels descriptivos

Archivos modificados:
- crud-symfony/src/Form/ProductoType.php
- crud-symfony/src/Controller/ProductoController.php

¿Qué se busca?
- Ocultar el campo user en la vista de nuevo producto
- Mostrar el campo user en la vista de edición (editable)
- Asignar automáticamente el usuario actual al crear productos
- Mejorar la usabilidad mostrando nombres/emails en lugar de IDs

Cambios realizados:

1. ProductoType.php - Campo user condicional:
   - Agregada opción personalizada 'show_user' con valor false por defecto
   - Campo user solo se agrega al formulario si show_user = true
   - choice_label de categoria cambiado a 'nombre'
   - choice_label de user cambiado a 'email'
   - Implementación con condicional if ($options['show_user'])

2. ProductoController.php - Método new():
   - Agregada asignación automática: $producto->setUser($this->getUser())
   - El usuario actual se asigna antes de persistir el producto
   - No se pasa la opción show_user (usa el default false)

3. ProductoController.php - Método edit():
   - Agregada opción ['show_user' => true] al crear el formulario
   - El campo user aparece en edición y es editable

Código implementado en ProductoType:
```php
if ($options['show_user']) {
    $builder->add('user', EntityType::class, [
        'class' => User::class,
        'choice_label' => 'email',
    ]);
}
```

Código en configureOptions:
```php
$resolver->setDefaults([
    'data_class' => Producto::class,
    'show_user' => false,
]);
```

Resultado:
- Vista NEW (/producto/new):
  * Campo user NO aparece
  * Usuario se asigna automáticamente al usuario logueado
  * Selects muestran nombre de categoría (no ID)
  
- Vista EDIT (/producto/{id}/edit):
  * Campo user SÍ aparece
  * Campo user es editable (sin disabled)
  * Select muestra email del usuario (no ID)
  * Select muestra nombre de categoría (no ID)

Beneficios:
- Mejor experiencia de usuario (UX)
- Evita asignaciones incorrectas al crear productos
- Labels descriptivos en selects (nombres/emails vs IDs)
- Flexibilidad para cambiar el usuario en edición si es necesario
- Uso de opciones personalizadas en formularios Symfony (patrón estándar)

Próximo paso:
- Hacer commit y versionar estos cambios

---

[13/11/2025 04:43:48 p.m.] Comandos ejecutados: Commit, versionado y push de mejoras en formulario

Comandos:
1. git add .
2. git commit -m "Mejoras en formulario de Producto: Campo user condicional y labels descriptivos..."
3. git tag -a v1.8.1 -m "v1.8.1: Mejoras en formulario de Producto..."
4. git push origin main
5. git push origin v1.8.1

¿Qué se busca?
- Guardar las mejoras del formulario de Producto
- Crear una nueva versión del proyecto (v1.8.1)
- Documentar las mejoras de usabilidad
- Subir cambios al repositorio remoto en GitHub

Resultado:
- Commit creado exitosamente con hash 2b00600
- 3 archivos modificados, 144 inserciones, 6 eliminaciones
- Archivos principales:
  * crud-symfony/src/Form/ProductoType.php (opciones personalizadas)
  * crud-symfony/src/Controller/ProductoController.php (asignación automática user)
  * registro_actividades.txt (documentación actualizada)
- Tag v1.8.1 creado con descripción completa
- Cambios subidos exitosamente a GitHub
- Formulario de Producto mejorado significativamente

Versiones del proyecto actualizadas:
- v1.0.0: Inicialización de proyecto Symfony 7.1
- v1.1.0: Entidad User y migración de autenticación
- v1.2.0: LoginFormAuthenticator con remember me
- v1.3.0: RegistrationController con auto-autenticación
- v1.3.1: Links de navegación entre login y registro
- v1.4.0: HomeController y entidad Categoria
- v1.4.1: Redirect de logout y migración de Categoria
- v1.5.0: Entidad Producto con relaciones ManyToOne
- v1.6.0: Sistema de roles automático (ADMIN/USER)
- v1.6.1: Mejoras UX (redirección mediante controlador y fondo blanco)
- v1.7.0: CRUD de Categoria implementado y funcional
- v1.8.0: CRUD de Producto con relaciones implementado y funcional
- v1.8.1: Mejoras en formulario de Producto (campo user condicional, labels descriptivos)

Estado actual del proyecto:
- Sistema de autenticación completo
- Sistema de roles automático
- CRUD de Categoria completo
- CRUD de Producto mejorado con:
  * Campo user condicional (solo en edit)
  * Asignación automática de usuario en creación
  * Labels descriptivos (nombres/emails en lugar de IDs)
  * Mejor experiencia de usuario

Próximo paso:
- Continuar con mejoras adicionales según necesidades del proyecto

---

[13/11/2025 05:00:39 p.m.] SOLUCIÓN IMPLEMENTADA: Asignación automática de usuario y protección de rutas

╔════════════════════════════════════════════════════════════════════════════════╗
║                      EXPLICACIÓN DETALLADA DE LA SOLUCIÓN                     ║
╔════════════════════════════════════════════════════════════════════════════════╗

PROBLEMA INICIAL:
- Error: "Column 'user_id' cannot be null" al crear un producto
- El campo user_id es obligatorio (NOT NULL) en la base de datos
- El formulario no mostraba el campo user en creación
- $this->getUser() devolvía null porque no había autenticación requerida

╔════════════════════════════════════════════════════════════════════════════════╗
║                          SOLUCIÓN IMPLEMENTADA                                 ║
╔════════════════════════════════════════════════════════════════════════════════╗

1. PROTECCIÓN DE RUTAS CON AUTENTICACIÓN
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
   Archivo: src/Controller/ProductoController.php
   
   ✅ Agregado en TODOS los métodos del CRUD:
   
   $this->denyAccessUnlessGranted('IS_AUTHENTICATED_FULLY');
   
   ¿Qué hace?
   - Verifica que el usuario esté autenticado (logueado)
   - Si NO está autenticado, Symfony redirige automáticamente al login
   - Esto garantiza que $this->getUser() NUNCA sea null
   
   Métodos protegidos:
   ✓ index()  - Listar productos
   ✓ new()    - Crear producto
   ✓ show()   - Ver producto
   ✓ edit()   - Editar producto
   ✓ delete() - Eliminar producto

2. ASIGNACIÓN AUTOMÁTICA DEL USUARIO EN CREACIÓN
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
   Archivo: src/Controller/ProductoController.php
   Método: new()
   
   Flujo de ejecución:
   
   Paso 1: Verificar autenticación
   └─> $this->denyAccessUnlessGranted('IS_AUTHENTICATED_FULLY');
   
   Paso 2: Crear producto vacío
   └─> $producto = new Producto();
   
   Paso 3: Crear formulario SIN campo user
   └─> $form = $this->createForm(ProductoType::class, $producto);
       // show_user = false por defecto, el campo user NO aparece
   
   Paso 4: Procesar formulario
   └─> $form->handleRequest($request);
   
   Paso 5: Si es válido, asignar usuario y guardar
   └─> if ($form->isSubmitted() && $form->isValid()) {
           // CLAVE: Asignar el usuario actual automáticamente
           $producto->setUser($this->getUser());
           
           $entityManager->persist($producto);
           $entityManager->flush();
       }
   
   ¿Por qué funciona?
   - El formulario NO tiene campo user, así que no lo sobrescribe
   - Asignamos el usuario DESPUÉS de validar el formulario
   - $this->getUser() devuelve el usuario logueado (nunca null porque está protegido)
   - El producto se guarda con el user_id del usuario actual

3. FORMULARIO CON CAMPO CONDICIONAL
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
   Archivo: src/Form/ProductoType.php
   
   Opción personalizada agregada:
   
   'show_user' => false  // Por defecto NO mostrar campo user
   
   Lógica condicional en buildForm():
   
   if ($options['show_user']) {
       $builder->add('user', EntityType::class, [
           'class' => User::class,
           'choice_label' => 'email',  // Mostrar email en lugar de ID
       ]);
   }
   
   Uso en controladores:
   
   CREACIÓN (new):
   - No pasa show_user, usa el valor por defecto: false
   - Campo user NO aparece en el formulario
   - Usuario se asigna automáticamente en el controlador
   
   EDICIÓN (edit):
   - Pasa ['show_user' => true]
   - Campo user SÍ aparece en el formulario
   - Permite cambiar el usuario asignado si es necesario
   - Symfony mapea automáticamente el valor seleccionado

4. EDICIÓN SIMPLIFICADA
   ━━━━━━━━━━━━━━━━━━━━━
   Archivo: src/Controller/ProductoController.php
   Método: edit()
   
   Código:
   
   $form = $this->createForm(ProductoType::class, $producto, [
       'show_user' => true  // Mostrar el campo user
   ]);
   
   $form->handleRequest($request);
   
   if ($form->isSubmitted() && $form->isValid()) {
       // Symfony automáticamente actualiza el user del producto
       // porque el campo está mapeado normalmente
       $entityManager->flush();
   }
   
   ¿Por qué es simple?
   - El campo user está mapeado normalmente (no tiene 'mapped' => false)
   - Symfony carga automáticamente el usuario actual del producto
   - Al enviar, Symfony actualiza automáticamente el usuario
   - No necesitamos código manual para setear el usuario

╔════════════════════════════════════════════════════════════════════════════════╗
║                           MEJORAS ADICIONALES                                  ║
╔════════════════════════════════════════════════════════════════════════════════╗

✅ choice_label en campos EntityType:
   - Categoria: muestra 'nombre' en lugar de ID
   - User: muestra 'email' en lugar de ID
   - Mejora significativa de la experiencia de usuario

✅ Comentarios detallados en el código:
   - Cada línea importante tiene explicación
   - Facilita el mantenimiento futuro
   - Sirve como documentación para aprendizaje

✅ Seguridad mejorada:
   - Todas las rutas protegidas con autenticación
   - Token CSRF en eliminación
   - Previene accesos no autorizados

╔════════════════════════════════════════════════════════════════════════════════╗
║                          CÓMO USAR EL SISTEMA                                  ║
╔════════════════════════════════════════════════════════════════════════════════╗

PASO 1: Iniciar sesión
└─> Visitar: http://127.0.0.1:8000/login
    Ingresar credenciales de usuario

PASO 2: Crear un producto
└─> Visitar: http://127.0.0.1:8000/producto/new
    - El campo "user" NO aparece
    - Completar: nombre, precio, fecha, categoría
    - Al guardar, se asigna automáticamente el usuario logueado

PASO 3: Editar un producto
└─> Visitar: http://127.0.0.1:8000/producto/{id}/edit
    - El campo "user" SÍ aparece
    - Muestra el usuario actual asignado
    - Se puede cambiar si es necesario

╔════════════════════════════════════════════════════════════════════════════════╗
║                         ARCHIVOS MODIFICADOS                                   ║
╔════════════════════════════════════════════════════════════════════════════════╗

1. src/Controller/ProductoController.php
   - Agregada protección de autenticación en todos los métodos
   - Asignación automática de usuario en new()
   - Simplificado el método edit()
   - Comentarios detallados en cada método

2. src/Form/ProductoType.php
   - Opción personalizada 'show_user'
   - Campo condicional para user
   - choice_label mejorados
   - Comentarios explicativos

╔════════════════════════════════════════════════════════════════════════════════╗
║                         PRÓXIMOS PASOS                                         ║
╔════════════════════════════════════════════════════════════════════════════════╗

✓ CRUD de Producto funcional con asignación automática de usuario
✓ Protección de rutas implementada
✓ Formularios condicionales funcionando

Pendiente:
- Aplicar misma protección a CategoriaController
- Implementar Bootstrap para mejorar UI
- Agregar control de acceso por roles (ADMIN/USER)
- Agregar mensajes flash informativos
- Implementar búsqueda de productos
- Crear sistema API

---

[13/11/2025 05:07:49 p.m.] Comandos ejecutados: Commit y versionado v1.9.0

Comandos:
1. git add .
2. git commit -m "Protección de autenticación y asignación automática de usuario..."
3. git tag -a v1.9.0 -m "v1.9.0: Protección de rutas..."
4. git push origin main
5. git push origin v1.9.0

¿Qué se hizo?
- Crear commit con los cambios de protección de rutas
- Versionar como v1.9.0 con descripción completa
- Subir todo a GitHub

Resultado:
- Commit creado exitosamente con hash 4a16d9d
- 3 archivos modificados: ProductoController.php, ProductoType.php, registro_actividades.txt
- 318 inserciones, 5 eliminaciones
- Tag v1.9.0 creado y subido exitosamente
- Cambios en GitHub actualizados

VERSIÓN v1.9.0 - CHANGELOG:

✅ Protección de autenticación:
   - Todos los métodos de ProductoController protegidos
   - IS_AUTHENTICATED_FULLY en: index, new, show, edit, delete
   - Redirección automática a login si no está autenticado

✅ Asignación automática de usuario:
   - Usuario se asigna automáticamente al crear productos
   - $producto->setUser($this->getUser()) después de validación
   - Elimina el error "user_id cannot be null"

✅ Campo condicional en formularios:
   - Creación: campo user OCULTO (asignación automática)
   - Edición: campo user VISIBLE (permite cambiar usuario)
   - Opción personalizada 'show_user' en ProductoType

✅ Documentación mejorada:
   - Comentarios detallados en cada método del controlador
   - Explicación del flujo de autenticación
   - Comentarios en ProductoType sobre opciones personalizadas

Lista completa de versiones:
- v1.0.0: Inicialización Symfony 7.1
- v1.1.0: Entidad User y autenticación
- v1.2.0: LoginFormAuthenticator
- v1.3.0: RegistrationController
- v1.3.1: Links navegación
- v1.4.0: HomeController y Categoria
- v1.4.1: Redirect logout
- v1.5.0: Entidad Producto con relaciones
- v1.6.0: Sistema de roles ADMIN/USER
- v1.6.1: Mejoras UX
- v1.7.0: CRUD Categoria
- v1.8.0: CRUD Producto
- v1.8.1: Mejoras formulario Producto
- v1.9.0: Protección autenticación y asignación automática usuario ⭐ ACTUAL

Próximos pasos sugeridos:
1. Proteger CategoriaController (similar a ProductoController)
2. Integrar Bootstrap para mejorar diseño
3. Implementar control de acceso por roles
4. Agregar mensajes flash informativos

---

[13/11/2025 05:15:34 p.m.] Integración de Bootstrap 5.3.8 - Configuración completa

╔════════════════════════════════════════════════════════════════════════════════╗
║                    INTEGRACIÓN DE BOOTSTRAP 5.3.8                              ║
╔════════════════════════════════════════════════════════════════════════════════╗

OBJETIVO:
Reemplazar SimpleCSS por Bootstrap 5.3.8 para mejorar el diseño y aplicar
automáticamente estilos a todos los formularios del proyecto.

╔════════════════════════════════════════════════════════════════════════════════╗
║                         ARCHIVOS MODIFICADOS                                   ║
╔════════════════════════════════════════════════════════════════════════════════╗

1. templates/base.html.twig
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━
   
   ✅ Bootstrap CSS agregado (línea 12):
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" 
         rel="stylesheet" 
         integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" 
         crossorigin="anonymous">
   
   ✅ Bootstrap JS Bundle agregado (línea 33 - antes de </body>):
   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" 
           integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" 
           crossorigin="anonymous"></script>
   
   ✅ SimpleCSS comentado (ya no se usa):
   <!-- Usar SimpleCSS desde CDN 
       <link rel="stylesheet" href="https://unpkg.com/simpledotcss/simple.css">
   -->

2. config/packages/twig.yaml
   ━━━━━━━━━━━━━━━━━━━━━━━━━━
   
   ✅ Form theme de Bootstrap configurado:
   twig:
       file_name_pattern: '*.twig'
       form_themes:
           - 'bootstrap_5_layout.html.twig'  # ⭐ CLAVE: Aplica Bootstrap automáticamente

╔════════════════════════════════════════════════════════════════════════════════╗
║                    ¿QUÉ HACE bootstrap_5_layout.html.twig?                     ║
╔════════════════════════════════════════════════════════════════════════════════╗

Este es un archivo de tema incluido en Symfony que aplica AUTOMÁTICAMENTE
las clases de Bootstrap 5 a TODOS los formularios del proyecto.

✅ Clases aplicadas automáticamente:
   
   Inputs de texto/número/fecha:
   └─> class="form-control"
   
   Labels:
   └─> class="form-label"
   
   Selects (EntityType):
   └─> class="form-select"
   
   Checkboxes:
   └─> class="form-check-input"
   
   Errores de validación:
   └─> class="is-invalid"
   └─> <div class="invalid-feedback">mensaje de error</div>
   
   Contenedores de campos:
   └─> class="mb-3" (margin-bottom)

✅ Formularios afectados AUTOMÁTICAMENTE:
   - ProductoType (nombre, precio, fecha, categoria, user)
   - CategoriaType (nombre)
   - RegistrationFormType (email, password)
   - LoginFormType (email, password)
   - Cualquier formulario futuro que crees

✅ SIN necesidad de modificar:
   - Ningún archivo .php de formularios
   - Ningún template .twig
   - Todo funciona automáticamente

╔════════════════════════════════════════════════════════════════════════════════╗
║                           COMPONENTES DISPONIBLES                              ║
╔════════════════════════════════════════════════════════════════════════════════╗

Con Bootstrap 5.3.8 ahora tienes acceso a:

✅ Sistema de Grid (col-1 a col-12, responsive)
✅ Botones con estilos (.btn .btn-primary, .btn-danger, etc.)
✅ Alerts (.alert .alert-success, .alert-danger, etc.)
✅ Cards (.card, .card-body, .card-header)
✅ Navbars responsive
✅ Modals (ventanas emergentes)
✅ Tooltips y Popovers
✅ Badges, Breadcrumbs, Progress bars
✅ Formularios completamente estilizados
✅ Tablas responsive (.table .table-striped, etc.)
✅ Spinners de carga
✅ Offcanvas (sidebars deslizantes)

╔════════════════════════════════════════════════════════════════════════════════╗
║                         VENTAJAS DE ESTA CONFIGURACIÓN                         ║
╔════════════════════════════════════════════════════════════════════════════════╗

1. ✅ Formularios bonitos SIN tocar código
   - Solo con form_themes: ['bootstrap_5_layout.html.twig']
   - Todos los formularios se ven profesionales automáticamente

2. ✅ Responsive por defecto
   - Bootstrap es mobile-first
   - Se adapta a tablets, móviles, desktop

3. ✅ CDN = Carga rápida
   - Bootstrap se descarga desde servidores optimizados
   - Cache compartido entre sitios
   - Sin archivos locales pesados

4. ✅ Última versión (5.3.8)
   - Todas las mejoras y correcciones de bugs
   - Compatibilidad moderna

5. ✅ JavaScript incluido
   - Modals, dropdowns, tooltips funcionan automáticamente
   - No necesitas jQuery

╔════════════════════════════════════════════════════════════════════════════════╗
║                          PRÓXIMOS PASOS SUGERIDOS                              ║
╔════════════════════════════════════════════════════════════════════════════════╗

1. ✅ Mejorar templates de vistas index/show/edit
   - Usar .table .table-striped para listados
   - Agregar .btn .btn-primary a botones de crear
   - Usar .btn .btn-danger para eliminar
   - Agregar .card para envolver contenido

2. ✅ Agregar navbar responsive
   - Menú de navegación con logo
   - Links a Productos, Categorías
   - Botón de logout

3. ✅ Implementar alerts para mensajes flash
   - Confirmaciones de acciones (creado, editado, eliminado)
   - Mensajes de error amigables

4. ✅ Mejorar diseño de formularios
   - Usar grid system (col-md-6, col-lg-4)
   - Agrupar campos relacionados en .card

5. ✅ Agregar breadcrumbs
   - Navegación jerárquica (Home > Productos > Crear)

╔════════════════════════════════════════════════════════════════════════════════╗
║                            EJEMPLO DE USO                                      ║
╔════════════════════════════════════════════════════════════════════════════════╗

Antes (sin hacer nada):
Los formularios ya tienen clases de Bootstrap aplicadas automáticamente

Para mejorar un template manualmente:
{# En producto/index.html.twig #}
<div class="container mt-4">
    <div class="card">
        <div class="card-header">
            <h1>Listado de Productos</h1>
        </div>
        <div class="card-body">
            <a href="{{ path('app_producto_new') }}" class="btn btn-primary mb-3">
                Crear nuevo
            </a>
            
            <table class="table table-striped table-hover">
                <thead>
                    <tr>
                        <th>Nombre</th>
                        <th>Precio</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    {% for producto in productos %}
                        <tr>
                            <td>{{ producto.nombre }}</td>
                            <td>{{ producto.precio }}</td>
                            <td>
                                <a href="{{ path('app_producto_edit', {'id': producto.id}) }}" 
                                   class="btn btn-sm btn-warning">Editar</a>
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>

╔════════════════════════════════════════════════════════════════════════════════╗
║                              RESUMEN                                           ║
╔════════════════════════════════════════════════════════════════════════════════╗

✅ Bootstrap 5.3.8 integrado correctamente
✅ Form theme configurado en twig.yaml
✅ Todos los formularios con estilos automáticos
✅ JavaScript de Bootstrap disponible
✅ Listo para mejorar templates

Estado: COMPLETADO ✓

Próximo paso recomendado:
- Hacer commit de estos cambios
- Crear versión v1.9.1 o v1.10.0
- Comenzar a mejorar templates de vistas

---

[13/11/2025 05:19:24 p.m.] Comandos ejecutados: Commit y versionado v1.10.0

Comandos:
1. git add .
2. git commit -m "Integración de Bootstrap 5.3.8..."
3. git tag -a v1.10.0 -m "v1.10.0: Integración de Bootstrap 5.3.8..."
4. git push origin main
5. git push origin v1.10.0

¿Qué se hizo?
- Crear commit con la integración de Bootstrap
- Versionar como v1.10.0 con changelog completo
- Subir todo a GitHub

Resultado:
- Commit creado exitosamente con hash b89b147
- 4 archivos modificados: base.html.twig, twig.yaml, index.html.twig, registro_actividades.txt
- 297 inserciones, 4 eliminaciones
- Tag v1.10.0 creado y subido exitosamente
- Cambios en GitHub actualizados

VERSIÓN v1.10.0 - CHANGELOG:

✅ Bootstrap 5.3.8 integrado:
   - CDN CSS agregado en base.html.twig
   - CDN JS Bundle agregado (incluye Popper.js)
   - SimpleCSS removido (comentado)

✅ Form theme configurado:
   - bootstrap_5_layout.html.twig en twig.yaml
   - Aplicación automática de clases Bootstrap a formularios
   - Sin necesidad de modificar archivos PHP

✅ Estilos automáticos aplicados:
   - form-control en inputs
   - form-select en selects
   - form-label en labels
   - is-invalid + invalid-feedback en errores
   - mb-3 en contenedores de campos

✅ Componentes disponibles:
   - Grid system responsive
   - Botones, Cards, Alerts, Modals
   - Navbars, Tables, Badges
   - Tooltips, Popovers, Dropdowns
   - Y todo el ecosistema Bootstrap 5.3.8

Lista completa de versiones:
- v1.0.0: Inicialización Symfony 7.1
- v1.1.0: Entidad User y autenticación
- v1.2.0: LoginFormAuthenticator
- v1.3.0: RegistrationController
- v1.3.1: Links navegación
- v1.4.0: HomeController y Categoria
- v1.4.1: Redirect logout
- v1.5.0: Entidad Producto con relaciones
- v1.6.0: Sistema de roles ADMIN/USER
- v1.6.1: Mejoras UX
- v1.7.0: CRUD Categoria
- v1.8.0: CRUD Producto
- v1.8.1: Mejoras formulario Producto
- v1.9.0: Protección autenticación y asignación automática usuario
- v1.10.0: Integración Bootstrap 5.3.8 ⭐ ACTUAL

Próximos pasos sugeridos:
1. Mejorar templates de vistas (index, show, edit) con componentes Bootstrap
2. Agregar navbar responsive con navegación
3. Implementar mensajes flash con Bootstrap alerts
4. Proteger CategoriaController (similar a ProductoController)
5. Agregar breadcrumbs de navegación

---

[13/11/2025 05:25:13 p.m.] Redirección automática basada en estado de autenticación

╔════════════════════════════════════════════════════════════════════════════════╗
║              REDIRECCIÓN AUTOMÁTICA SEGÚN AUTENTICACIÓN                        ║
╔════════════════════════════════════════════════════════════════════════════════╗

OBJETIVO:
Implementar lógica de redirección inteligente en la ruta raíz (/) para:
- Redirigir a /login si el usuario NO está autenticado
- Redirigir a /home si el usuario SÍ está autenticado

ARCHIVO MODIFICADO:
━━━━━━━━━━━━━━━━━━

src/Controller/HomeController.php

IMPLEMENTACIÓN:
━━━━━━━━━━━━━━━

Método root() - Ruta '/' (app_root):

```php
#[Route('/', name: 'app_root')]
public function root(): Response
{
    // Si NO está autenticado, redirigir a login
    if (!$this->getUser()) {
        return $this->redirectToRoute('app_login');
    }
    
    // Si está autenticado, mostrar home
    return $this->redirectToRoute('app_home');
}
```

FLUJO DE NAVEGACIÓN:
━━━━━━━━━━━━━━━━━━━

1. Usuario visita la ruta raíz: http://127.0.0.1:8000/
   
   ┌─────────────────────────────────────┐
   │  ¿Usuario está autenticado?         │
   └─────────────────────────────────────┘
                  │
        ┌─────────┴─────────┐
        │                   │
       NO                  SÍ
        │                   │
        ▼                   ▼
   /login              /home
   (app_login)         (app_home)

2. Desde /login después de autenticarse:
   → Redirige a /home (configurado en LoginFormAuthenticator)

3. Desde /logout:
   → Redirige a /login (configurado en security.yaml)

VENTAJAS DE ESTA IMPLEMENTACIÓN:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

✅ Experiencia de usuario mejorada:
   - Usuario no autenticado → Ve login inmediatamente
   - Usuario autenticado → Accede directo al home

✅ Seguridad:
   - No se permite acceso a rutas protegidas sin autenticación
   - Redirección automática sin exponer contenido

✅ Navegación intuitiva:
   - / siempre lleva al lugar correcto según el estado
   - No hay confusión sobre dónde empezar

✅ SEO friendly:
   - Ruta raíz (/) funcional y accesible
   - Redirecciones HTTP correctas

RUTAS DEL SISTEMA:
━━━━━━━━━━━━━━━━━

/ (app_root)
├─ NO autenticado → /login
└─ SÍ autenticado → /home

/login (app_login)
├─ Formulario de inicio de sesión
└─ Después de login → /home

/register (app_register)
├─ Formulario de registro
└─ Después de registro → Auto-login → /home

/home (app_home)
└─ Página principal (requiere autenticación)

/logout (app_logout)
└─ Cierra sesión → /login

/producto/* (requiere IS_AUTHENTICATED_FULLY)
/categoria/* (sin protección aún)

MEJORAS FUTURAS SUGERIDAS:
━━━━━━━━━━━━━━━━━━━━━━━━

1. Prevenir que usuarios autenticados vean /login y /register:
   ```php
   // En SecurityController::login()
   if ($this->getUser()) {
       return $this->redirectToRoute('app_home');
   }
   ```

2. Agregar access_control en security.yaml:
   ```yaml
   access_control:
       - { path: ^/login, roles: PUBLIC_ACCESS }
       - { path: ^/register, roles: PUBLIC_ACCESS }
       - { path: ^/, roles: ROLE_USER }
   ```

3. Proteger CategoriaController similar a ProductoController

4. Agregar navbar con indicador de usuario logueado

TESTING:
━━━━━━━

Casos de prueba realizados:
✅ Visitar / sin autenticación → Redirige a /login
✅ Iniciar sesión → Redirige a /home
✅ Visitar / autenticado → Redirige a /home
✅ Cerrar sesión → Redirige a /login

Estado: IMPLEMENTADO Y FUNCIONAL ✓

---

[13/11/2025 05:28:34 p.m.] Comandos ejecutados: Commit y versionado v1.10.1

Comandos:
1. git add .
2. git commit -m "Redirección inteligente en ruta raíz según autenticación..."
3. git tag -a v1.10.1 -m "v1.10.1: Redirección inteligente según autenticación..."
4. git push origin main
5. git push origin v1.10.1

¿Qué se hizo?
- Documentar la implementación de redirección automática
- Crear commit con los cambios
- Versionar como v1.10.1
- Subir a GitHub

Resultado:
- Commit creado exitosamente con hash b46f7ba
- 2 archivos modificados: HomeController.php, registro_actividades.txt
- 218 inserciones, 2 eliminaciones
- Tag v1.10.1 creado y subido exitosamente
- Cambios en GitHub actualizados

VERSIÓN v1.10.1 - CHANGELOG:

✅ Redirección inteligente implementada:
   - Ruta raíz (/) ahora evalúa estado de autenticación
   - NO autenticado → Redirige a /login
   - SÍ autenticado → Redirige a /home

✅ Método root() en HomeController:
   - Validación con $this->getUser()
   - Redirecciones mediante redirectToRoute()
   - Flujo de navegación mejorado

✅ Experiencia de usuario mejorada:
   - Acceso directo al contenido correcto
   - Sin confusión en la ruta inicial
   - Navegación intuitiva

Lista completa de versiones:
- v1.0.0: Inicialización Symfony 7.1
- v1.1.0: Entidad User y autenticación
- v1.2.0: LoginFormAuthenticator
- v1.3.0: RegistrationController
- v1.3.1: Links navegación
- v1.4.0: HomeController y Categoria
- v1.4.1: Redirect logout
- v1.5.0: Entidad Producto con relaciones
- v1.6.0: Sistema de roles ADMIN/USER
- v1.6.1: Mejoras UX
- v1.7.0: CRUD Categoria
- v1.8.0: CRUD Producto
- v1.8.1: Mejoras formulario Producto
- v1.9.0: Protección autenticación y asignación automática usuario
- v1.10.0: Integración Bootstrap 5.3.8
- v1.10.1: Redirección inteligente en ruta raíz ⭐ ACTUAL

Próximos pasos sugeridos:
1. Prevenir acceso a /login y /register si ya está autenticado
2. Proteger CategoriaController con IS_AUTHENTICATED_FULLY
3. Mejorar templates con componentes Bootstrap
4. Agregar navbar con navegación y usuario logueado

---

[13/11/2025 05:32:51 p.m.] GUÍA: Cómo inspeccionar variables en Symfony (debugging)

╔════════════════════════════════════════════════════════════════════════════════╗
║                    TÉCNICAS DE DEBUGGING EN SYMFONY                            ║
╔════════════════════════════════════════════════════════════════════════════════╗

CONTEXTO:
Cuando desarrollas en Symfony y necesitas inspeccionar variables como $this->getUser(),
tienes múltiples opciones para ver su contenido y depurar problemas.

╔════════════════════════════════════════════════════════════════════════════════╗
║                         MÉTODOS DE DEBUGGING                                   ║
╔════════════════════════════════════════════════════════════════════════════════╗

1. dd() - DUMP AND DIE (Recomendado para debugging rápido)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
   
   ¿Qué hace?
   - Muestra toda la información de la variable en pantalla
   - Detiene la ejecución del código (die)
   - Formato legible y coloreado
   
   Uso en controlador:
   ```php
   #[Route('/', name: 'app_root')]
   public function root(): Response
   {
       dd($this->getUser());  // Muestra el objeto User completo y para
       
       // ⚠️ El código siguiente NO se ejecuta
       return $this->redirectToRoute('app_home');
   }
   ```
   
   Salida:
   - Muestra propiedades del User: id, email, roles, password (hasheado), etc.
   - Formato HTML con pestañas expandibles
   - Muy útil para ver qué datos tiene el objeto

2. dump() - DUMP SIN DETENER (Para debugging continuo)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
   
   ¿Qué hace?
   - Muestra información de la variable
   - Continúa la ejecución del código
   - Aparece en la Symfony Debug Toolbar (barra inferior)
   
   Uso en controlador:
   ```php
   #[Route('/', name: 'app_root')]
   public function root(): Response
   {
       dump($this->getUser());  // Muestra info pero continúa
       
       if (!$this->getUser()) {
           return $this->redirectToRoute('app_login');
       }
       
       return $this->redirectToRoute('app_home');  // ✅ Se ejecuta
   }
   ```
   
   Ventaja:
   - Puedes hacer múltiples dumps en diferentes puntos
   - No interrumpe el flujo de la aplicación
   - Ideal para comparar valores en diferentes momentos

3. var_dump() + die() - PHP NATIVO (Tradicional)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
   
   ¿Qué hace?
   - Función nativa de PHP
   - Muestra tipo y contenido de la variable
   - Requiere die() manual para detener
   
   Uso en controlador:
   ```php
   #[Route('/', name: 'app_root')]
   public function root(): Response
   {
       var_dump($this->getUser());
       die();  // Detener ejecución manualmente
   }
   ```
   
   Desventaja:
   - Formato menos legible que dd()
   - Hay que recordar poner die()

4. INSPECCIÓN DE PROPIEDADES ESPECÍFICAS (Debugging selectivo)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
   
   ¿Qué hace?
   - Muestra solo las propiedades que te interesan
   - Formato personalizado
   - Evita sobrecarga de información
   
   Uso en controlador:
   ```php
   #[Route('/', name: 'app_root')]
   public function root(): Response
   {
       $user = $this->getUser();
       
       dd([
           'existe_usuario' => $user !== null,
           'email' => $user?->getEmail(),
           'roles' => $user?->getRoles(),
           'id' => $user?->getId(),
           'es_admin' => in_array('ROLE_ADMIN', $user?->getRoles() ?? []),
       ]);
   }
   ```
   
   Salida ejemplo:
   ```
   array:5 [
     "existe_usuario" => true
     "email" => "admin@example.com"
     "roles" => array:1 [
       0 => "ROLE_ADMIN"
     ]
     "id" => 1
     "es_admin" => true
   ]
   ```
   
   Ventaja:
   - Información clara y concisa
   - Fácil de leer
   - Solo lo que necesitas

5. SYMFONY PROFILER (Sin modificar código)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
   
   ¿Qué hace?
   - Herramienta visual de Symfony
   - Muestra información del request completo
   - Incluye datos de autenticación
   
   Cómo usar:
   1. Accede a cualquier ruta: http://127.0.0.1:8000/
   2. Mira la barra negra en la parte inferior de la página
   3. Click en el icono de "Security" 🔒
   4. Verás:
      - Usuario autenticado (o "anon." si no hay)
      - Roles del usuario
      - Token de autenticación
      - Firewall activo
   
   Ventaja:
   - No requiere modificar código
   - Información completa del sistema de seguridad
   - Disponible en todas las páginas

6. TWIG DEBUG (En templates)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
   
   ¿Qué hace?
   - Inspecciona variables en las vistas
   - Usa la variable global app.user
   
   Uso en template:
   ```twig
   {# En home/index.html.twig #}
   {{ dump(app.user) }}
   
   {# O propiedades específicas #}
   <p>Email: {{ app.user.email }}</p>
   <p>Roles: {{ app.user.roles|json_encode }}</p>
   ```
   
   Ventaja:
   - Ver cómo llegan los datos a la vista
   - Debugging del lado del template

7. LOGGING (Para producción)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
   
   ¿Qué hace?
   - Registra información en archivos de log
   - No afecta la respuesta al usuario
   - Útil en producción
   
   Uso en controlador:
   ```php
   use Psr\Log\LoggerInterface;
   
   public function root(LoggerInterface $logger): Response
   {
       $user = $this->getUser();
       
       $logger->info('Usuario en ruta raíz', [
           'email' => $user?->getEmail(),
           'roles' => $user?->getRoles(),
       ]);
       
       // ... resto del código
   }
   ```
   
   Ver logs:
   - Archivo: var/log/dev.log
   - Comando: tail -f var/log/dev.log

╔════════════════════════════════════════════════════════════════════════════════╗
║                         COMPARACIÓN DE MÉTODOS                                 ║
╔════════════════════════════════════════════════════════════════════════════════╗

Método          | Detiene | Formato  | Uso                    | Recomendado
────────────────┼─────────┼──────────┼────────────────────────┼─────────────
dd()            | ✅ Sí   | ⭐⭐⭐⭐⭐ | Debugging rápido       | ✅ Desarrollo
dump()          | ❌ No   | ⭐⭐⭐⭐⭐ | Debugging múltiple     | ✅ Desarrollo
var_dump()      | ❌ No*  | ⭐⭐⭐     | Debugging tradicional  | ⚠️  Ocasional
Profiler        | ❌ No   | ⭐⭐⭐⭐⭐ | Sin tocar código       | ✅ Siempre
Twig dump       | ❌ No   | ⭐⭐⭐⭐   | Debugging templates    | ✅ Templates
Logger          | ❌ No   | ⭐⭐⭐     | Producción             | ✅ Producción

* Requiere die() manual

╔════════════════════════════════════════════════════════════════════════════════╗
║                         EJEMPLO PRÁCTICO COMPLETO                              ║
╔════════════════════════════════════════════════════════════════════════════════╗

Escenario: Quieres ver qué usuario está accediendo a la ruta raíz

Opción A - Debugging rápido:
```php
#[Route('/', name: 'app_root')]
public function root(): Response
{
    dd($this->getUser());
}
```
Resultado: Pantalla con todos los datos del User, ejecución detenida

Opción B - Debugging sin interrumpir:
```php
#[Route('/', name: 'app_root')]
public function root(): Response
{
    dump('Usuario en root:', $this->getUser());
    
    if (!$this->getUser()) {
        dump('Redirigiendo a login');
        return $this->redirectToRoute('app_login');
    }
    
    dump('Redirigiendo a home');
    return $this->redirectToRoute('app_home');
}
```
Resultado: Info en debug toolbar, página funciona normal

Opción C - Información específica:
```php
#[Route('/', name: 'app_root')]
public function root(): Response
{
    $user = $this->getUser();
    
    dump([
        'autenticado' => $user !== null,
        'email' => $user?->getEmail(),
        'es_admin' => in_array('ROLE_ADMIN', $user?->getRoles() ?? []),
    ]);
    
    if (!$user) {
        return $this->redirectToRoute('app_login');
    }
    
    return $this->redirectToRoute('app_home');
}
```
Resultado: Solo la info que necesitas, funciona normal

╔════════════════════════════════════════════════════════════════════════════════╗
║                         RECOMENDACIONES                                        ║
╔════════════════════════════════════════════════════════════════════════════════╗

✅ HACER:
- Usar dd() para debugging rápido y temporal
- Usar dump() cuando necesites ver múltiples valores
- Revisar Symfony Profiler antes de agregar dumps
- Remover todos los dd() y dump() antes de commit
- Usar logger en producción

❌ EVITAR:
- Dejar dd() o dump() en código de producción
- Usar var_dump() cuando dd() está disponible
- Hacer dumps dentro de bucles (puede ser lento)
- Olvidar quitar dumps antes de hacer commit

🔧 CONSEJO PRO:
Antes de hacer commit, busca dumps olvidados:
```bash
grep -r "dd(" src/
grep -r "dump(" src/
grep -r "var_dump" src/
```

╔════════════════════════════════════════════════════════════════════════════════╗
║                              RESUMEN                                           ║
╔════════════════════════════════════════════════════════════════════════════════╗

Para inspeccionar $this->getUser():

1. Opción más rápida: dd($this->getUser())
2. Ver sin detener: dump($this->getUser())
3. Solo propiedades: dd(['email' => $this->getUser()?->getEmail()])
4. Sin código: Symfony Profiler > Security
5. En templates: {{ dump(app.user) }}

Documentación útil:
- VarDumper: https://symfony.com/doc/current/components/var_dumper.html
- Profiler: https://symfony.com/doc/current/profiler.html
- Logging: https://symfony.com/doc/current/logging.html

---

[13/11/2025 06:12:27 p.m.] v1.11.0 - Refactor visual completo de templates de Categoría con Bootstrap 5

╔════════════════════════════════════════════════════════════════════════════════╗
║                MEJORAS VISUALES EN TEMPLATES DE CATEGORÍA                      ║
╔════════════════════════════════════════════════════════════════════════════════╗

¿Qué se busca?
- Modernizar todas las vistas de la entidad Categoría usando Bootstrap 5
- Mejorar la experiencia visual y la usabilidad
- Implementar componentes Bootstrap (cards, botones, tablas)
- Añadir iconos Bootstrap Icons para mejor identificación visual
- Unificar estilos y crear botones con clases dinámicas
- Integrar formulario de eliminación con confirmación JavaScript
- Hacer las vistas responsive y adaptables a diferentes dispositivos

Archivos modificados:
1. templates/categoria/index.html.twig
2. templates/categoria/show.html.twig
3. templates/categoria/edit.html.twig
4. templates/categoria/new.html.twig
5. templates/categoria/_form.html.twig
6. templates/categoria/_delete_form.html.twig

══════════════════════════════════════════════════════════════════════════════
ARCHIVO 1: templates/categoria/index.html.twig (Listado de categorías)
══════════════════════════════════════════════════════════════════════════════

ANTES (Versión básica sin estilos):
```twig
{% extends 'base.html.twig' %}

{% block title %}Categoria index{% endblock %}

{% block body %}
    <h1>Categoria index</h1>

    <table class="table">
        <thead>
            <tr>
                <th>Id</th>
                <th>Nombre</th>
                <th>actions</th>
            </tr>
        </thead>
        <tbody>
        {% for categorium in categorias %}
            <tr>
                <td>{{ categorium.id }}</td>
                <td>{{ categorium.nombre }}</td>
                <td>
                    <a href="{{ path('app_categoria_show', {'id': categorium.id}) }}">show</a>
                    <a href="{{ path('app_categoria_edit', {'id': categorium.id}) }}">edit</a>
                </td>
            </tr>
        {% else %}
            <tr>
                <td colspan="3">no records found</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    <a class="button" href="{{ path('app_categoria_new') }}">Create new</a>
{% endblock %}
```

DESPUÉS (Con Bootstrap 5 y componentes modernos):
```twig
{% extends 'base.html.twig' %}

{% block title %}Categorías{% endblock %}

{% block body %}
<div class="container mt-5">
    <div class="row mb-4">
        <div class="col">
            <h1 class="display-4">
                <i class="bi bi-folder"></i> Categorías
            </h1>
        </div>
        <div class="col-auto">
            <a href="{{ path('app_categoria_new') }}" class="btn btn-primary btn-lg">
                <i class="bi bi-plus-circle"></i> Nueva Categoría
            </a>
        </div>
    </div>

    {% if categorias is empty %}
        <div class="alert alert-info" role="alert">
            <i class="bi bi-info-circle"></i> No hay categorías registradas. 
            <a href="{{ path('app_categoria_new') }}" class="alert-link">Crear la primera</a>
        </div>
    {% else %}
        <div class="card shadow-sm">
            <div class="card-body p-0">
                <div class="table-responsive">
                    <table class="table table-hover table-striped mb-0">
                        <thead class="table-dark">
                            <tr>
                                <th scope="col" style="width: 10%">#ID</th>
                                <th scope="col">Nombre</th>
                                <th scope="col" class="text-center" style="width: 20%">Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                        {% for categorium in categorias %}
                            <tr>
                                <td class="fw-bold">{{ categorium.id }}</td>
                                <td>{{ categorium.nombre }}</td>
                                <td class="text-center">
                                    <div class="btn-group btn-group-sm gap-2" role="group">
                                        <a href="{{ path('app_categoria_show', {'id': categorium.id}) }}" 
                                           class="btn btn-info" 
                                           title="Ver detalles">
                                            <i class="bi bi-eye"></i> Ver
                                        </a>
                                        <a href="{{ path('app_categoria_edit', {'id': categorium.id}) }}" 
                                           class="btn btn-warning" 
                                           title="Editar">
                                            <i class="bi bi-pencil"></i> Editar
                                        </a>
                                        <form method="post" 
                                              action="{{ path('app_categoria_delete', {'id': categorium.id}) }}" 
                                              style="display:inline;"
                                              onsubmit="return confirm('¿Estás seguro de eliminar esta categoría?');">
                                            <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ categorium.id) }}">
                                            <button type="submit" class="btn btn-danger btn-sm" title="Eliminar">
                                                <i class="bi bi-trash"></i> Eliminar
                                            </button>
                                        </form>
                                    </div>
                                </td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="card-footer text-muted">
                Total de categorías: <strong>{{ categorias|length }}</strong>
            </div>
        </div>
    {% endif %}
</div>
{% endblock %}
```

Mejoras aplicadas en index.html.twig:
✅ Container responsive con margen superior (mt-5)
✅ Header de dos columnas: título + botón "Nueva Categoría"
✅ Título con clase display-4 para tamaño grande
✅ Iconos Bootstrap Icons (bi-folder, bi-plus-circle)
✅ Alerta Bootstrap cuando no hay registros (alert-info)
✅ Card con sombra (shadow-sm) que envuelve la tabla
✅ Tabla con efectos: table-hover (hover), table-striped (filas alternadas)
✅ Header de tabla oscuro (table-dark)
✅ Tabla responsive con scroll horizontal en móviles
✅ Botones de acción en grupo con espaciado (btn-group gap-2)
✅ Botón eliminar integrado con confirmación JavaScript
✅ Colores semánticos: info (azul), warning (amarillo), danger (rojo)
✅ Footer de card mostrando total de categorías
✅ Traducción al español de todos los textos

══════════════════════════════════════════════════════════════════════════════
ARCHIVO 2: templates/categoria/show.html.twig (Ver detalles)
══════════════════════════════════════════════════════════════════════════════

ANTES:
```twig
{% extends 'base.html.twig' %}

{% block title %}Categoria{% endblock %}

{% block body %}
    <h1>Categoria</h1>

    <table class="table">
        <tbody>
            <tr>
                <th>Id</th>
                <td>{{ categorium.id }}</td>
            </tr>
            <tr>
                <th>Nombre</th>
                <td>{{ categorium.nombre }}</td>
            </tr>
        </tbody>
    </table>

    <a href="{{ path('app_categoria_index') }}">back to list</a>

    <a href="{{ path('app_categoria_edit', {'id': categorium.id}) }}">edit</a>

    {{ include('categoria/_delete_form.html.twig') }}
{% endblock %}
```

DESPUÉS:
```twig
{% extends 'base.html.twig' %}

{% block title %}Categoría - {{ categorium.nombre }}{% endblock %}

{% block body %}
<div class="container mt-5">
    <div class="row mb-4">
        <div class="col">
            <h1 class="display-5">
                <i class="bi bi-folder-fill"></i> Categoría: {{ categorium.nombre }}
            </h1>
        </div>
    </div>

    <div class="card shadow-sm">
        <div class="card-header bg-primary text-white">
            <h5 class="mb-0"><i class="bi bi-info-circle"></i> Detalles de la Categoría</h5>
        </div>
        <div class="card-body">
            <table class="table table-borderless">
                <tbody>
                    <tr>
                        <th scope="row" style="width: 150px;">
                            <i class="bi bi-hash"></i> ID:
                        </th>
                        <td class="fw-bold">{{ categorium.id }}</td>
                    </tr>
                    <tr>
                        <th scope="row">
                            <i class="bi bi-tag"></i> Nombre:
                        </th>
                        <td class="fs-5">{{ categorium.nombre }}</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="mt-4 d-flex gap-2">
        <a href="{{ path('app_categoria_index') }}" class="btn btn-secondary">
            <i class="bi bi-arrow-left"></i> Volver al listado
        </a>
        <a href="{{ path('app_categoria_edit', {'id': categorium.id}) }}" class="btn btn-warning">
            <i class="bi bi-pencil"></i> Editar
        </a>
        
        <form method="post" 
              action="{{ path('app_categoria_delete', {'id': categorium.id}) }}" 
              style="display:inline;"
              onsubmit="return confirm('¿Estás seguro de eliminar esta categoría?');">
            <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ categorium.id) }}">
            <button type="submit" class="btn btn-danger">
                <i class="bi bi-trash"></i> Eliminar
            </button>
        </form>
    </div>
</div>
{% endblock %}
```

Mejoras aplicadas en show.html.twig:
✅ Título dinámico con nombre de la categoría
✅ Header con icono y nombre de la categoría actual
✅ Card con header azul (bg-primary text-white)
✅ Tabla sin bordes (table-borderless) para diseño limpio
✅ Iconos descriptivos para cada campo (bi-hash, bi-tag)
✅ Valores destacados: ID en negrita, Nombre en tamaño grande
✅ Botones con flexbox y espaciado (d-flex gap-2)
✅ Colores semánticos en botones
✅ Formulario de eliminar integrado directamente
✅ Eliminado el uso de _delete_form.html.twig por integración directa

══════════════════════════════════════════════════════════════════════════════
ARCHIVO 3: templates/categoria/edit.html.twig (Editar categoría)
══════════════════════════════════════════════════════════════════════════════

ANTES:
```twig
{% extends 'base.html.twig' %}

{% block title %}Edit Categoria{% endblock %}

{% block body %}
    <h1>Edit Categoria</h1>

    {{ include('categoria/_form.html.twig', {'button_label': 'Update'}) }}

    <a href="{{ path('app_categoria_index') }}">back to list</a>

    {{ include('categoria/_delete_form.html.twig') }}
{% endblock %}
```

DESPUÉS:
```twig
{% extends 'base.html.twig' %}

{% block title %}Editar Categoría - {{ categorium.nombre }}{% endblock %}

{% block body %}
<div class="container mt-5">
    <div class="row mb-4">
        <div class="col">
            <h1 class="display-5">
                <i class="bi bi-pencil-square"></i> Editar Categoría
            </h1>
            <p class="text-muted">Modificar los datos de: <strong>{{ categorium.nombre }}</strong></p>
        </div>
    </div>

    <div class="row">
        <div class="col-md-6">
            <div class="card shadow-sm">
                <div class="card-header bg-warning text-dark">
                    <h5 class="mb-0"><i class="bi bi-pencil"></i> Formulario de Edición</h5>
                </div>
                <div class="card-body">
                    {{ include('categoria/_form.html.twig', {
                        'button_label': 'Actualizar',
                        'button_class': 'btn btn-warning'
                    }) }}
                </div>
            </div>

            <div class="mt-3 d-flex gap-2">
                <a href="{{ path('app_categoria_index') }}" class="btn btn-secondary">
                    <i class="bi bi-arrow-left"></i> Volver al listado
                </a>
                
                <form method="post" 
                      action="{{ path('app_categoria_delete', {'id': categorium.id}) }}" 
                      style="display:inline;"
                      onsubmit="return confirm('¿Estás seguro de eliminar esta categoría?');">
                    <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ categorium.id) }}">
                    <button type="submit" class="btn btn-danger">
                        <i class="bi bi-trash"></i> Eliminar
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}
```

Mejoras aplicadas en edit.html.twig:
✅ Título dinámico con nombre de categoría
✅ Subtítulo descriptivo (text-muted) indicando qué se edita
✅ Card amarillo (bg-warning) para destacar que es edición
✅ Layout responsive (col-md-6) - formulario ocupa media pantalla
✅ Botón "Actualizar" con clase dinámica (btn-warning)
✅ Botones separados con flexbox y espaciado
✅ Formulario eliminar integrado
✅ Iconos descriptivos (bi-pencil-square, bi-arrow-left)

══════════════════════════════════════════════════════════════════════════════
ARCHIVO 4: templates/categoria/new.html.twig (Nueva categoría)
══════════════════════════════════════════════════════════════════════════════

ANTES:
```twig
{% extends 'base.html.twig' %}

{% block title %}New Categoria{% endblock %}

{% block body %}
    <h1>Create new Categoria</h1>

    {{ include('categoria/_form.html.twig') }}

    <a href="{{ path('app_categoria_index') }}">back to list</a>
{% endblock %}
```

DESPUÉS:
```twig
{% extends 'base.html.twig' %}

{% block title %}Nueva Categoría{% endblock %}

{% block body %}
<div class="container mt-5">
    <div class="row mb-4">
        <div class="col">
            <h1 class="display-5">
                <i class="bi bi-plus-circle"></i> Nueva Categoría
            </h1>
            <p class="text-muted">Crear una nueva categoría en el sistema</p>
        </div>
    </div>

    <div class="row">
        <div class="col-md-6">
            <div class="card shadow-sm">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0"><i class="bi bi-folder-plus"></i> Formulario de Creación</h5>
                </div>
                <div class="card-body">
                    {{ include('categoria/_form.html.twig', {
                        'button_label': 'Crear Categoría',
                        'button_class': 'btn btn-primary'
                    }) }}
                </div>
            </div>

            <div class="mt-3">
                <a href="{{ path('app_categoria_index') }}" class="btn btn-secondary">
                    <i class="bi bi-arrow-left"></i> Volver al listado
                </a>
            </div>
        </div>
    </div>
</div>
{% endblock %}
```

Mejoras aplicadas en new.html.twig:
✅ Título en español "Nueva Categoría"
✅ Subtítulo descriptivo de la acción
✅ Card azul (bg-primary) para creación
✅ Layout responsive (col-md-6)
✅ Botón "Crear Categoría" con clase dinámica (btn-primary)
✅ Icono de plus (bi-plus-circle)
✅ Botón volver separado del formulario

══════════════════════════════════════════════════════════════════════════════
ARCHIVO 5: templates/categoria/_form.html.twig (Formulario reutilizable)
══════════════════════════════════════════════════════════════════════════════

ANTES:
```twig
{{ form_start(form) }}
    {{ form_widget(form) }}
    <button class="btn">{{ button_label|default('Save') }}</button>
{{ form_end(form) }}
```

DESPUÉS:
```twig
{{ form_start(form) }}
    {{ form_widget(form) }}
    <button class="{{ button_class|default('btn btn-primary') }}">
        {{ button_label|default('Guardar') }}
    </button>
{{ form_end(form) }}
```

Mejoras aplicadas en _form.html.twig:
✅ Botón con clase dinámica mediante parámetro button_class
✅ Valor por defecto: btn btn-primary (azul)
✅ Permite personalizar color desde template que lo incluye
✅ Label por defecto en español: "Guardar"
✅ Reutilizable para new.html.twig y edit.html.twig

Uso del formulario:
- En new.html.twig: button_class='btn btn-primary' (azul)
- En edit.html.twig: button_class='btn btn-warning' (amarillo)

══════════════════════════════════════════════════════════════════════════════
ARCHIVO 6: templates/categoria/_delete_form.html.twig (Ya no se usa)
══════════════════════════════════════════════════════════════════════════════

ANTES:
```twig
<form method="post" action="{{ path('app_categoria_delete', {'id': categorium.id}) }}" onsubmit="return confirm('Are you sure you want to delete this item?');">
    <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ categorium.id) }}">
    <button class="btn">Delete</button>
</form>
```

DESPUÉS:
El archivo existe pero ya no se usa mediante include(). Ahora el formulario de 
eliminación está integrado directamente en show.html.twig y edit.html.twig con:
- Confirmación en español
- Botón danger (rojo)
- Icono de basura
- Inline con otros botones

══════════════════════════════════════════════════════════════════════════════

Resultado final:
✅ Todas las vistas de Categoría modernizadas con Bootstrap 5
✅ Diseño responsive y adaptable a dispositivos móviles
✅ Componentes visuales consistentes (cards, botones, tablas)
✅ Iconos Bootstrap Icons para mejor UX
✅ Botones con colores semánticos y espaciado uniforme
✅ Formulario de eliminar con confirmación JavaScript integrada
✅ Sistema de clases dinámicas para botones de formulario
✅ Traducción completa al español
✅ Layout profesional y moderno

Comandos ejecutados:
1. Modificación manual de todos los templates de categoría
2. git add templates/categoria/*.twig
3. git add ../registro_actividades.txt
4. git commit -m "v1.11.0: Refactor vistas de Categoría con Bootstrap 5..."
5. git tag v1.11.0 -m "Refactor vistas de Categoría con Bootstrap 5..."
6. git push && git push --tags

Hash del commit: 6bb3b66
Tag creado: v1.11.0
Estado: ✅ Sincronizado con GitHub

---

[13/11/2025 06:17:10 p.m.] Comando "CPCV REG ACT" configurado

¿Qué se hizo?
- Se estableció un comando abreviado para automatizar el proceso completo de documentación y versionado
- El comando "CPCV REG ACT" ejecutará automáticamente todos los pasos necesarios

Funcionamiento del comando:
1. Obtiene timestamp actual
2. Documenta cambios en registro_actividades.txt (antes/después, explicación detallada)
3. Ejecuta git add de todos los archivos modificados
4. Realiza git commit con mensaje descriptivo y nueva versión
5. Crea git tag con la nueva versión
6. Ejecuta git push && git push --tags

Significado:
- CPCV = Commit, Push, Cambio de Versión
- REG ACT = Registro de Actividades

Resultado:
✅ Comando configurado y listo para usar
✅ Automatiza todo el flujo de documentación y versionado
✅ Ahorra tiempo en tareas repetitivas
✅ Garantiza consistencia en la documentación

---

[13/11/2025 06:34:50 p.m.] Separación de templates: base.html.twig vs base_admin.html.twig

¿Qué se hizo?
Se creó una arquitectura de doble template para separar la interfaz pública de la interfaz autenticada:

1. **base.html.twig** (template original)
   - Uso: Páginas públicas (login, registro)
   - Características: Layout simple sin navbar ni menú
   - Sin navegación

2. **base_admin.html.twig** (template nuevo - 303 líneas)
   - Uso: Páginas de usuarios autenticados
   - Características completas:
     * Navbar con gradiente púrpura (#667eea a #764ba2)
     * Menú de navegación: Home, Categorías, Productos
     * Dropdown de usuario con:
       - Email del usuario (parte antes del @)
       - Badge de rol (ROLE_ADMIN con estrella dorada / ROLE_USER)
       - Enlace a Perfil
       - Enlace a Configuración
       - Botón Cerrar Sesión
     * Active link highlighting (detecta ruta actual)
     * Footer con información del stack tecnológico
     * Footer con padding inferior adicional (3rem) para mejor separación
     * Crédito de desarrollo: "por Jhonatan Fernandez"
     * Custom CSS con animaciones (fadeInUp, float, pulse)
     * Scrollbar personalizado con gradiente
     * Sticky navbar

Elementos del nuevo base_admin.html.twig:

**Navbar:**
```twig
<nav class="navbar navbar-expand-lg navbar-dark sticky-top shadow-lg">
    <!-- Gradiente: linear-gradient(135deg, #667eea 0%, #764ba2 100%) -->
    <!-- Links: Home, Categorías, Productos -->
    <!-- Dropdown usuario con email, rol, perfil, configuración, logout -->
```

**Active Link Detection:**
```twig
{% set currentRoute = app.request.get('_route') %}
class="{{ currentRoute == 'app_home' ? 'active' : '' }}"
```

**Footer:**
```twig
<footer class="footer-custom mt-auto">
    <div class="container">
        <!-- Stack tecnológico, enlaces rápidos, créditos -->
        <p>© 2025 CRUD Symfony. Desarrollado con ❤️ por Jhonatan Fernandez usando Symfony & Bootstrap</p>
    </div>
</footer>
```

**CSS del Footer:**
```css
.footer-custom {
    background: #2d3748;
    color: #cbd5e0;
    padding: 2rem 0 3rem 0; /* Padding inferior aumentado a 3rem para mejor separación */
    margin-top: 4rem;
}
```

**Custom CSS:**
- Animación fadeInUp para elementos del navbar
- Animación float para elementos flotantes
- Animación pulse para elementos pulsantes
- Scrollbar personalizado con gradiente púrpura
- Hover effects en links del navbar
- Transitions suaves en todos los elementos

Resultado:
✅ Arquitectura de templates separada correctamente
✅ Interfaz pública sin navbar (base.html.twig)
✅ Interfaz administrativa completa (base_admin.html.twig)
✅ Navbar responsive con Bootstrap 5
✅ User dropdown funcional con información del usuario
✅ Footer con stack tecnológico
✅ Animaciones y efectos visuales modernos

---

[13/11/2025 06:34:50 p.m.] Rediseño completo del dashboard home (templates/home/index.html.twig)

¿Qué se hizo?
Se transformó el home básico en un dashboard espectacular y moderno con estadísticas, módulos y diseño profesional.

**ANTES:**
```twig
{% extends 'base.html.twig' %}
{% block body %}
<div class="example-wrapper">
    <h1>Hello {{ controller_name }}! ✅</h1>
    <p>This friendly message is coming from...</p>
</div>
{% endblock %}
```

**DESPUÉS:**
```twig
{% extends 'base_admin.html.twig' %}
{% block title %}Dashboard{% endblock %}
{% block body %}
<!-- 400+ líneas de diseño espectacular -->
```

**Cambios en HomeController:**
```php
// ANTES:
public function index(): Response {
    return $this->render('home/index.html.twig', [
        'controller_name' => 'HomeController',
    ]);
}

// DESPUÉS:
use App\Repository\CategoriaRepository;
use App\Repository\ProductoRepository;

public function index(
    CategoriaRepository $categoriaRepo,
    ProductoRepository $productoRepo
): Response {
    $totalCategorias = count($categoriaRepo->findAll());
    $totalProductos = count($productoRepo->findAll());
    return $this->render('home/index.html.twig', [
        'totalCategorias' => $totalCategorias,
        'totalProductos' => $totalProductos,
    ]);
}
```

**Secciones del nuevo dashboard:**

1. **Hero Section** (con gradiente púrpura):
   - Título de bienvenida personalizado
   - Subtítulo con stack tecnológico
   - Email del usuario
   - Badge de rol (Administrador/Usuario)
   - Icono flotante animado

2. **Estadísticas Rápidas** (2 cards):
   - Total Categorías con número en gradiente
   - Total Productos con número en gradiente
   - Iconos grandes en background (opacity 0.15)
   - Hover effect: translateY(-10px)
   - Barra de color lateral (linear-gradient)

3. **Módulos del Sistema** (2 cards grandes):
   - **Card Categorías:**
     * Icono grande con gradiente púrpura
     * Descripción del módulo
     * Botón "Ver Todas las Categorías" (gradiente)
     * Botón "Crear Nueva Categoría" (outline)
   
   - **Card Productos:**
     * Icono grande con gradiente verde
     * Descripción del módulo
     * Botón "Ver Todos los Productos" (gradiente verde)
     * Botón "Crear Nuevo Producto" (outline)

4. **Tecnologías** (3 cards):
   - Symfony 7.1
   - Bootstrap 5
   - Doctrine ORM
   - Iconos animados con hover

5. **Acciones Rápidas** (panel con 4 botones):
   - Nueva Categoría
   - Nuevo Producto
   - Listar Categorías
   - Listar Productos

**CSS y Animaciones:**

```css
/* Gradientes */
--gradient-primary: #667eea a #764ba2 (púrpura)
--gradient-success: #11998e a #38ef7d (verde)

/* Animaciones */
@keyframes float { /* Flotación suave */ }
@keyframes pulse { /* Pulsación */ }

/* Hover Effects */
.stats-card:hover { transform: translateY(-10px); }
.module-card:hover { transform: translateY(-15px) scale(1.02); }
.module-icon:hover { transform: scale(1.2) rotate(10deg); }

/* Cards */
border-radius: 20px (todas las tarjetas)
box-shadow dinámica en hover
```

**Efectos visuales implementados:**

✨ Hero section con gradiente y sombra
✨ Stats cards con barra lateral de color
✨ Números con gradiente animado
✨ Module cards con hover 3D
✨ Iconos que rotan y crecen en hover
✨ Botones con gradiente y sombra al hover
✨ Animación float para icono de fondo
✨ Transiciones suaves (0.3s - 0.4s)
✨ Cards con backdrop en hover

Resultado:
✅ Dashboard moderno y profesional
✅ Estadísticas en tiempo real desde BD
✅ Acceso rápido a todos los módulos
✅ Diseño responsive con Bootstrap 5
✅ Animaciones y efectos avanzados
✅ Gradientes personalizados (púrpura y verde)
✅ Interfaz intuitiva y atractiva
✅ Totalmente funcional e integrado

---

[13/11/2025 06:34:50 p.m.] Actualización de vistas de Categoría para usar base_admin.html.twig

¿Qué se hizo?
Se actualizaron todas las plantillas de Categoría para extender el nuevo template base_admin.html.twig en lugar de base.html.twig, integrándolas con la nueva arquitectura de navegación.

**Archivos modificados:**

1. **templates/categoria/index.html.twig**
   - ANTES: {% extends 'base.html.twig' %}
   - DESPUÉS: {% extends 'base_admin.html.twig' %}
   - Impacto: Ahora tiene navbar con menú de navegación y footer

2. **templates/categoria/show.html.twig**
   - ANTES: {% extends 'base.html.twig' %}
   - DESPUÉS: {% extends 'base_admin.html.twig' %}
   - Impacto: Vista de detalle con navegación completa

3. **templates/categoria/edit.html.twig**
   - ANTES: {% extends 'base.html.twig' %}
   - DESPUÉS: {% extends 'base_admin.html.twig' %}
   - Impacto: Formulario de edición con navbar y menú

4. **templates/categoria/new.html.twig**
   - ANTES: {% extends 'base.html.twig' %}
   - DESPUÉS: {% extends 'base_admin.html.twig' %}
   - Impacto: Formulario de creación con navegación

**Archivos NO modificados:**
- templates/categoria/_form.html.twig (no extiende ningún base)
- templates/categoria/_delete_form.html.twig (no extiende ningún base)

**Beneficios:**
✅ Navegación consistente en todas las vistas de categoría
✅ Active link highlighting (link "Categorías" resaltado)
✅ Acceso rápido a otros módulos desde el navbar
✅ User dropdown disponible en todas las páginas
✅ Footer con información tecnológica
✅ Diseño unificado con gradientes y estilos modernos
✅ Mejor UX con navegación siempre visible

**Rutas afectadas:**
- /categoria (index) - Listado con navbar
- /categoria/new - Crear con navbar
- /categoria/{id} (show) - Ver con navbar
- /categoria/{id}/edit - Editar con navbar

Resultado:
✅ 4 archivos actualizados exitosamente
✅ Todas las vistas de categoría integradas con base_admin
✅ Navegación funcional y consistente
✅ Active links funcionando correctamente
✅ Arquitectura de templates consolidada

---

[13/11/2025 06:51:52 p.m.] Ajustes finales de espaciado y créditos en base_admin.html.twig

¿Qué se hizo?
Se realizaron ajustes finales de diseño en el template base_admin.html.twig para mejorar el espaciado y agregar créditos de desarrollo.

**Cambios realizados:**

1. **Crédito de desarrollo en el footer:**
   - ANTES: "© 2025 CRUD Symfony. Desarrollado con ❤️ usando Symfony & Bootstrap"
   - DESPUÉS: "© 2025 CRUD Symfony. Desarrollado con ❤️ por Jhonatan Fernandez usando Symfony & Bootstrap"
   - Se agregó el nombre del desarrollador en el footer

2. **Mejora del espaciado del footer (padding inferior):**
   - ANTES: `padding: 2rem 0;`
   - DESPUÉS: `padding: 2rem 0 3rem 0;`
   - Se aumentó el padding inferior de 2rem a 3rem para mejor separación

3. **Espaciado general antes del footer:**
   - ANTES: `<footer class="footer-custom mt-auto">`
   - DESPUÉS: `<footer class="footer-custom mt-5">`
   - Se cambió de `mt-auto` a `mt-5` (margin-top: 3rem)
   - Esto aplica de manera general a TODAS las páginas que usen base_admin.html.twig
   - Ya no es necesario agregar márgenes individuales en cada vista

**Beneficios del espaciado general:**
✅ Consistencia en todas las páginas (home, categorías, productos)
✅ Evita duplicación de código (no hay que poner mb-5 en cada vista)
✅ Fácil mantenimiento (se ajusta en un solo lugar)
✅ Mejor separación visual entre contenido y footer
✅ Diseño más limpio y profesional

**CSS final del footer:**
```css
.footer-custom {
    background: #2d3748;
    color: #cbd5e0;
    padding: 2rem 0 3rem 0; /* Padding inferior: 3rem */
    margin-top: 4rem;
}
```

**HTML del footer:**
```html
<footer class="footer-custom mt-5"> <!-- Margin-top general: 3rem -->
    ...
    <p>© 2025 CRUD Symfony. Desarrollado con ❤️ por Jhonatan Fernandez usando Symfony & Bootstrap</p>
    ...
</footer>
```

Resultado:
✅ Footer con crédito de desarrollo visible
✅ Espaciado inferior optimizado (3rem padding)
✅ Separación general antes del footer (3rem margin-top)
✅ Diseño consistente en todas las vistas
✅ Mejor presentación visual del sistema

---

[13/11/2025 06:59:34 p.m.] Refactor visual de vista index de Producto con Bootstrap 5

¿Qué se hizo?
Se rediseñó completamente la vista de listado de productos (templates/producto/index.html.twig) siguiendo el mismo patrón visual de categorías, con mejoras adicionales específicas para productos.

**ANTES:**
```twig
{% extends 'base.html.twig' %}
{% block title %}Producto index{% endblock %}
{% block body %}
    <h1>Producto index</h1>
    <table class="table">
        <thead>
            <tr>
                <th>Id</th>
                <th>Nombre</th>
                <th>Precio</th>
                <th>Fecha</th>
                <th>actions</th>
            </tr>
        </thead>
        <tbody>
        {% for producto in productos %}
            <tr>
                <td>{{ producto.id }}</td>
                <td>{{ producto.nombre }}</td>
                <td>{{ producto.precio }}</td>
                <td>{{ producto.fecha ? producto.fecha|date('Y-m-d H:i:s') : '' }}</td>
                <td>
                    <a href="{{ path('app_producto_show', {'id': producto.id}) }}">show</a>
                    <a href="{{ path('app_producto_edit', {'id': producto.id}) }}">edit</a>
                </td>
            </tr>
        {% else %}
            <tr>
                <td colspan="5">no records found</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
    <a href="{{ path('app_producto_new') }}">Create new</a>
{% endblock %}
```

**DESPUÉS:**
```twig
{% extends 'base_admin.html.twig' %}
{% block title %}Productos{% endblock %}
{% block body %}
<div class="container mt-5">
    <div class="row mb-4">
        <div class="col">
            <h1 class="display-4">
                <i class="bi bi-box-seam"></i> Productos
            </h1>
        </div>
        <div class="col-auto">
            <a href="{{ path('app_producto_new') }}" class="btn btn-primary btn-lg">
                <i class="bi bi-plus-circle"></i> Nuevo Producto
            </a>
        </div>
    </div>

    {% if productos is empty %}
        <div class="alert alert-info">
            <i class="bi bi-info-circle"></i> No hay productos registrados. 
            <a href="{{ path('app_producto_new') }}" class="alert-link">Crear el primero</a>
        </div>
    {% else %}
        <div class="card shadow-sm">
            <div class="card-body p-0">
                <div class="table-responsive">
                    <table class="table table-hover table-striped mb-0">
                        <thead class="table-dark">
                            <tr>
                                <th scope="col" style="width: 8%">#ID</th>
                                <th scope="col">Nombre</th>
                                <th scope="col" style="width: 12%">Precio</th>
                                <th scope="col" style="width: 15%">Fecha</th>
                                <th scope="col">Categoría</th>
                                <th scope="col" class="text-center" style="width: 20%">Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                        {% for producto in productos %}
                            <tr>
                                <td class="fw-bold">{{ producto.id }}</td>
                                <td>{{ producto.nombre }}</td>
                                <td class="text-success fw-bold">${{ producto.precio|number_format(2, '.', ',') }}</td>
                                <td>
                                    <small class="text-muted">
                                        <i class="bi bi-calendar"></i> 
                                        {{ producto.fecha ? producto.fecha|date('d/m/Y') : '-' }}
                                    </small>
                                </td>
                                <td>
                                    {% if producto.categoria %}
                                        <span class="badge bg-primary">
                                            <i class="bi bi-folder"></i> {{ producto.categoria.nombre }}
                                        </span>
                                    {% else %}
                                        <span class="badge bg-secondary">Sin categoría</span>
                                    {% endif %}
                                </td>
                                <td class="text-center">
                                    <div class="btn-group btn-group-sm gap-2">
                                        <a href="{{ path('app_producto_show', {'id': producto.id}) }}" 
                                           class="btn btn-info" title="Ver detalles">
                                            <i class="bi bi-eye"></i> Ver
                                        </a>
                                        <a href="{{ path('app_producto_edit', {'id': producto.id}) }}" 
                                           class="btn btn-warning" title="Editar">
                                            <i class="bi bi-pencil"></i> Editar
                                        </a>
                                        <form method="post" 
                                            action="{{ path('app_producto_delete', {'id': producto.id}) }}" 
                                            style="display:inline;"
                                            onsubmit="return confirm('¿Estás seguro de eliminar este producto?');">
                                            <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ producto.id) }}">
                                            <button type="submit" class="btn btn-danger btn-sm" title="Eliminar">
                                                <i class="bi bi-trash"></i> Eliminar
                                            </button>
                                        </form>
                                    </div>
                                </td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="card-footer text-muted">
                Total de productos: <strong>{{ productos|length }}</strong>
            </div>
        </div>
    {% endif %}
</div>
{% endblock %}
```

**Cambios principales:**

1. **Template base:**
   - ANTES: Extendía `base.html.twig` (sin navbar)
   - DESPUÉS: Extiende `base_admin.html.twig` (con navbar y footer completo)

2. **Título:**
   - ANTES: Simple "Producto index"
   - DESPUÉS: "Productos" con icono de caja (bi-box-seam)

3. **Header mejorado:**
   - Título con clase `display-4` y icono
   - Botón "Nuevo Producto" con `btn-primary btn-lg` (azul, grande)
   - Layout responsive con row/col

4. **Tabla moderna:**
   - Card con sombra que envuelve la tabla
   - Thead oscuro (`table-dark`)
   - Tabla responsive con hover y striped
   - 6 columnas: #ID, Nombre, Precio, Fecha, Categoría, Acciones

5. **Columna de Precio:**
   - Formato: `${{ producto.precio|number_format(2, '.', ',') }}`
   - Estilo: `text-success fw-bold` (verde y negrita)
   - Ejemplo: $1,299.99

6. **Columna de Fecha:**
   - Formato: dd/mm/yyyy (antes: Y-m-d H:i:s)
   - Icono de calendario
   - Texto small y muted
   - Muestra "-" si no hay fecha

7. **Columna de Categoría (NUEVA):**
   - Badge azul (`bg-primary`) si tiene categoría
   - Muestra icono de carpeta + nombre
   - Badge gris (`bg-secondary`) si no tiene categoría

8. **Botones de acción:**
   - Ver (info/cyan)
   - Editar (warning/amarillo)
   - Eliminar (danger/rojo) con confirmación
   - Tooltips con title
   - Iconos de Bootstrap Icons

9. **Footer de la card:**
   - Muestra total de productos
   - Texto muted con número en bold

10. **Alerta cuando está vacío:**
    - Alert info con icono
    - Link para crear el primer producto

**Mejoras específicas de productos vs categorías:**
✨ Columna de precio formateado con símbolo $
✨ Columna de categoría con badge
✨ Fecha en formato corto dd/mm/yyyy
✨ Botón "Nuevo Producto" en azul (`btn-primary`) en vez de verde

Resultado:
✅ Vista moderna y profesional
✅ Tabla responsive con Bootstrap 5
✅ Precio formateado correctamente ($1,299.99)
✅ Fecha en formato español
✅ Relación con categoría visible
✅ Botones con iconos y colores semánticos
✅ Integrado con base_admin.html.twig
✅ Confirmación antes de eliminar
✅ Consistencia visual con módulo de categorías

---

[13/11/2025 07:09:32 p.m.] Refactor completo de todas las vistas de Producto con Bootstrap 5

¿Qué se hizo?
Se actualizaron todas las plantillas del módulo de Producto para usar base_admin.html.twig y Bootstrap 5, con diseño moderno y profesional siguiendo el mismo patrón de categorías.

**Archivos modificados:**

1. **templates/producto/index.html.twig** (ya documentado anteriormente)
   - Listado con tabla moderna, precio formateado, columna de categoría
   - Botón "Nuevo Producto" en azul

2. **templates/producto/show.html.twig**
   - ANTES: Layout básico sin estilos
   - DESPUÉS: Card con detalles completos del producto

3. **templates/producto/new.html.twig**
   - ANTES: Formulario simple sin estilos
   - DESPUÉS: Card azul con formulario de creación

4. **templates/producto/edit.html.twig**
   - ANTES: Formulario básico
   - DESPUÉS: Card amarillo con formulario de edición

5. **templates/producto/_form.html.twig**
   - ANTES: Botón genérico sin clase
   - DESPUÉS: Botón con clase dinámica y label personalizable

6. **templates/producto/_delete_form.html.twig**
   - ANTES: Botón básico "Delete" en inglés
   - DESPUÉS: Botón rojo "Eliminar" con icono

---

**DETALLES DE CADA VISTA:**

**2. show.html.twig - Vista de Detalles**

ANTES:
```twig
{% extends 'base.html.twig' %}
{% block title %}Producto{% endblock %}
{% block body %}
    <h1>Producto</h1>
    <table class="table">
        <tbody>
            <tr><th>Id</th><td>{{ producto.id }}</td></tr>
            <tr><th>Nombre</th><td>{{ producto.nombre }}</td></tr>
            <tr><th>Precio</th><td>{{ producto.precio }}</td></tr>
            <tr><th>Fecha</th><td>{{ producto.fecha ? producto.fecha|date('Y-m-d H:i:s') : '' }}</td></tr>
        </tbody>
    </table>
    <a href="{{ path('app_producto_index') }}">back to list</a>
    <a href="{{ path('app_producto_edit', {'id': producto.id}) }}">edit</a>
    {{ include('producto/_delete_form.html.twig') }}
{% endblock %}
```

DESPUÉS:
```twig
{% extends 'base_admin.html.twig' %}
{% block title %}Producto - {{ producto.nombre }}{% endblock %}
{% block body %}
<div class="container mt-5">
    <div class="row mb-4">
        <div class="col">
            <h1 class="display-5">
                <i class="bi bi-box-fill"></i> Producto: {{ producto.nombre }}
            </h1>
        </div>
    </div>

    <div class="card shadow-sm">
        <div class="card-header bg-primary text-white">
            <h5 class="mb-0"><i class="bi bi-info-circle"></i> Detalles del Producto</h5>
        </div>
        <div class="card-body">
            <table class="table table-borderless">
                <tbody>
                    <tr>
                        <th scope="row" style="width: 150px;">
                            <i class="bi bi-hash"></i> ID:
                        </th>
                        <td class="fw-bold">{{ producto.id }}</td>
                    </tr>
                    <tr>
                        <th scope="row">
                            <i class="bi bi-tag"></i> Nombre:
                        </th>
                        <td class="fs-5">{{ producto.nombre }}</td>
                    </tr>
                    <tr>
                        <th scope="row">
                            <i class="bi bi-cash-coin"></i> Precio:
                        </th>
                        <td class="fs-4 text-success fw-bold">
                            ${{ producto.precio|number_format(2, '.', ',') }}
                        </td>
                    </tr>
                    <tr>
                        <th scope="row">
                            <i class="bi bi-calendar-event"></i> Fecha:
                        </th>
                        <td>
                            {% if producto.fecha %}
                                <span class="badge bg-info text-dark">
                                    {{ producto.fecha|date('d/m/Y') }}
                                </span>
                                <small class="text-muted ms-2">
                                    {{ producto.fecha|date('H:i:s') }}
                                </small>
                            {% else %}
                                <span class="text-muted">No especificada</span>
                            {% endif %}
                        </td>
                    </tr>
                    <tr>
                        <th scope="row">
                            <i class="bi bi-folder"></i> Categoría:
                        </th>
                        <td>
                            {% if producto.categoria %}
                                <span class="badge bg-primary fs-6">
                                    <i class="bi bi-folder-fill"></i> {{ producto.categoria.nombre }}
                                </span>
                            {% else %}
                                <span class="badge bg-secondary">Sin categoría</span>
                            {% endif %}
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="mt-4 d-flex gap-2">
        <a href="{{ path('app_producto_index') }}" class="btn btn-secondary">
            <i class="bi bi-arrow-left"></i> Volver al listado
        </a>
        <a href="{{ path('app_producto_edit', {'id': producto.id}) }}" class="btn btn-warning">
            <i class="bi bi-pencil"></i> Editar
        </a>
        <form method="post" 
              action="{{ path('app_producto_delete', {'id': producto.id}) }}" 
              style="display:inline;"
              onsubmit="return confirm('¿Estás seguro de eliminar este producto?');">
            <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ producto.id) }}">
            <button type="submit" class="btn btn-danger">
                <i class="bi bi-trash"></i> Eliminar
            </button>
        </form>
    </div>
</div>
{% endblock %}
```

Mejoras en show.html.twig:
✅ Título dinámico con nombre del producto
✅ Card con header azul
✅ 5 campos: ID, Nombre, Precio, Fecha, Categoría
✅ Precio formateado en verde grande: $1,299.99
✅ Fecha con badge + hora separada
✅ Categoría con badge (azul si tiene, gris si no)
✅ Iconos en cada campo
✅ Botones: Volver (gris), Editar (amarillo), Eliminar (rojo)

---

**3. new.html.twig - Vista de Creación**

ANTES:
```twig
{% extends 'base.html.twig' %}
{% block title %}New Producto{% endblock %}
{% block body %}
    <h1>Create new Producto</h1>
    {{ include('producto/_form.html.twig') }}
    <a href="{{ path('app_producto_index') }}">back to list</a>
{% endblock %}
```

DESPUÉS:
```twig
{% extends 'base_admin.html.twig' %}
{% block title %}Nuevo Producto{% endblock %}
{% block body %}
<div class="container mt-5">
    <div class="row mb-4">
        <div class="col">
            <h1 class="display-5">
                <i class="bi bi-plus-circle"></i> Nuevo Producto
            </h1>
            <p class="text-muted">Crear un nuevo producto en el sistema</p>
        </div>
    </div>

    <div class="row">
        <div class="col-md-6">
            <div class="card shadow-sm">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0"><i class="bi bi-box-seam"></i> Formulario de Creación</h5>
                </div>
                <div class="card-body">
                    {{ include('producto/_form.html.twig', {
                        'button_label': 'Crear Producto',
                        'button_class': 'btn btn-primary'
                    }) }}
                </div>
            </div>

            <div class="mt-3">
                <a href="{{ path('app_producto_index') }}" class="btn btn-secondary">
                    <i class="bi bi-arrow-left"></i> Volver al listado
                </a>
            </div>
        </div>
    </div>
</div>
{% endblock %}
```

Mejoras en new.html.twig:
✅ Título "Nuevo Producto" con icono plus-circle
✅ Subtítulo descriptivo
✅ Card con header azul (bg-primary)
✅ Formulario incluido con parámetros personalizados
✅ Botón "Crear Producto" en azul
✅ Botón "Volver al listado"
✅ Layout responsive (col-md-6)

---

**4. edit.html.twig - Vista de Edición**

ANTES:
```twig
{% extends 'base.html.twig' %}
{% block title %}Edit Producto{% endblock %}
{% block body %}
    <h1>Edit Producto</h1>
    {{ include('producto/_form.html.twig', {'button_label': 'Update'}) }}
    <a href="{{ path('app_producto_index') }}">back to list</a>
    {{ include('producto/_delete_form.html.twig') }}
{% endblock %}
```

DESPUÉS:
```twig
{% extends 'base_admin.html.twig' %}
{% block title %}Editar Producto - {{ producto.nombre }}{% endblock %}
{% block body %}
<div class="container mt-5">
    <div class="row mb-4">
        <div class="col">
            <h1 class="display-5">
                <i class="bi bi-pencil-square"></i> Editar Producto
            </h1>
            <p class="text-muted">Modificar los datos de: <strong>{{ producto.nombre }}</strong></p>
        </div>
    </div>

    <div class="row">
        <div class="col-md-6">
            <div class="card shadow-sm">
                <div class="card-header bg-warning text-dark">
                    <h5 class="mb-0"><i class="bi bi-pencil"></i> Formulario de Edición</h5>
                </div>
                <div class="card-body">
                    {{ include('producto/_form.html.twig', {
                        'button_label': 'Actualizar',
                        'button_class': 'btn btn-success'
                    }) }}
                </div>
            </div>

            <div class="mt-3 d-flex gap-2">
                <a href="{{ path('app_producto_index') }}" class="btn btn-secondary">
                    <i class="bi bi-arrow-left"></i> Volver al listado
                </a>
                <form method="post" 
                      action="{{ path('app_producto_delete', {'id': producto.id}) }}" 
                      style="display:inline;"
                      onsubmit="return confirm('¿Estás seguro de eliminar este producto?');">
                    <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ producto.id) }}">
                    <button type="submit" class="btn btn-danger">
                        <i class="bi bi-trash"></i> Eliminar
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}
```

Mejoras en edit.html.twig:
✅ Título dinámico con nombre del producto
✅ Muestra qué producto se está editando
✅ Card con header amarillo (bg-warning)
✅ Botón "Actualizar" en verde (btn-success)
✅ Botones inferiores: Volver + Eliminar
✅ Confirmación antes de eliminar

---

**5. _form.html.twig - Formulario Reutilizable**

ANTES:
```twig
{{ form_start(form) }}
    {{ form_widget(form) }}
    <button class="btn">{{ button_label|default('Save') }}</button>
{{ form_end(form) }}
```

DESPUÉS:
```twig
{{ form_start(form) }}
    {{ form_widget(form) }}
    <button class="{{ button_class|default('btn btn-primary') }}">
        {{ button_label|default('Guardar') }}
    </button>
{{ form_end(form) }}
```

Mejoras en _form.html.twig:
✅ Clase del botón dinámica (button_class)
✅ Por defecto: btn btn-primary
✅ Label del botón personalizable (button_label)
✅ Por defecto: "Guardar" en español
✅ Permite diferentes estilos según la acción:
   - new.html.twig → "Crear Producto" (azul)
   - edit.html.twig → "Actualizar" (verde)

---

**6. _delete_form.html.twig - Formulario de Eliminación**

ANTES:
```twig
<form method="post" action="{{ path('app_producto_delete', {'id': producto.id}) }}" onsubmit="return confirm('Are you sure you want to delete this item?');">
    <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ producto.id) }}">
    <button class="btn">Delete</button>
</form>
```

DESPUÉS:
```twig
<form method="post" action="{{ path('app_producto_delete', {'id': producto.id}) }}" onsubmit="return confirm('¿Estás seguro de eliminar este producto?');">
    <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ producto.id) }}">
    <button class="btn btn-danger">
        <i class="bi bi-trash"></i> Eliminar
    </button>
</form>
```

Mejoras en _delete_form.html.twig:
✅ Botón rojo (btn-danger)
✅ Icono de papelera (bi-trash)
✅ Texto "Eliminar" en español
✅ Confirmación en español
✅ Mantiene seguridad CSRF

---

**RESUMEN DE TODAS LAS VISTAS DE PRODUCTO:**

| Vista | Extiende | Header Color | Botón Principal | Características Especiales |
|-------|----------|--------------|-----------------|---------------------------|
| index.html.twig | base_admin | table-dark | "Nuevo Producto" (azul) | Tabla con precio formateado, categoría badge |
| show.html.twig | base_admin | bg-primary | - | 5 campos detallados, precio verde grande |
| new.html.twig | base_admin | bg-primary | "Crear Producto" (azul) | Formulario de creación |
| edit.html.twig | base_admin | bg-warning | "Actualizar" (verde) | Formulario de edición + eliminar |
| _form.html.twig | - | - | Dinámico | Clase y label personalizables |
| _delete_form.html.twig | - | - | "Eliminar" (rojo) | Confirmación en español |

Resultado Final:
✅ 6 archivos de producto completamente modernizados
✅ Todas las vistas usan base_admin.html.twig
✅ Diseño consistente con módulo de categorías
✅ Precio formateado en todas las vistas ($1,299.99)
✅ Relación con categoría visible con badges
✅ Fechas en formato español (dd/mm/yyyy)
✅ Botones con colores semánticos e iconos
✅ Formularios reutilizables con parámetros dinámicos
✅ Confirmaciones de eliminación en español
✅ Responsive design con Bootstrap 5
✅ Integración completa con navbar y footer

---

[13/11/2025 07:47:48 p.m.] Implementación de fecha automática en Producto con Lifecycle Callbacks

¿Qué se hizo?
Se implementó un sistema de creación automática de fecha para productos usando Doctrine Lifecycle Callbacks, con campo de fecha visible solo en edición (deshabilitado).

**Objetivo:**
- Al crear un producto: la fecha se genera automáticamente (no aparece en el formulario)
- Al editar un producto: la fecha se muestra pero está bloqueada (no se puede modificar)

---

**CAMBIOS REALIZADOS:**

**1. Entidad Producto (src/Entity/Producto.php)**

Agregado el atributo `#[ORM\HasLifecycleCallbacks]` a la clase:
```php
#[ORM\Entity(repositoryClass: ProductoRepository::class)]
#[ORM\HasLifecycleCallbacks]  // <- Habilita los lifecycle callbacks
class Producto
{
    // ... propiedades ...
}
```

Agregado el método `#[ORM\PrePersist]` para fecha automática:
```php
#[ORM\PrePersist]
public function setFechaAutomatica(): void
{
    if ($this->fecha === null) {
        $this->fecha = new \DateTime();
    }
}
```

**¿Qué hace PrePersist?**
- Se ejecuta ANTES de insertar el producto en la base de datos (primera vez)
- Verifica si la fecha está vacía (`null`)
- Si está vacía, asigna la fecha/hora actual automáticamente
- Si ya tiene fecha (en edición), no hace nada

**Tipo de dato actualizado:**
```php
// ANTES:
#[ORM\Column]
private ?\DateTime $fecha = null;

// DESPUÉS:
#[ORM\Column(type: Types::DATETIME_MUTABLE)]
private ?\DateTimeInterface $fecha = null;
```

---

**2. Formulario ProductoType (src/Form/ProductoType.php)**

Campo fecha ahora es CONDICIONAL - solo aparece en edición:
```php
public function buildForm(FormBuilderInterface $builder, array $options): void
{
    $builder
        ->add('nombre')
        ->add('precio')
        ->add('categoria', EntityType::class, [
            'class' => Categoria::class,
            'choice_label' => 'nombre',
        ])
    ;
    
    // CAMPO CONDICIONAL FECHA: Solo mostrar en EDICIÓN (deshabilitado)
    // En creación NO aparece porque se genera automáticamente con PrePersist
    if ($options['is_edit']) {
        $builder->add('fecha', DateTimeType::class, [
            'disabled' => true,  // Siempre deshabilitado en edición
            'required' => false,
            'widget' => 'single_text',
            'label' => 'Fecha de creación'
        ]);
    }
    
    // Campo user condicional (solo en edición)
    if ($options['show_user']) {
        $builder->add('user', EntityType::class, [
            'class' => User::class,
            'choice_label' => 'email',
        ]);
    }
}

public function configureOptions(OptionsResolver $resolver): void
{
    $resolver->setDefaults([
        'data_class' => Producto::class,
        'show_user' => false,   // Controla visibilidad del campo user
        'is_edit' => false,     // Controla visibilidad del campo fecha
    ]);
}
```

**Lógica del campo fecha:**
- `is_edit = false` (creación) → Campo fecha NO aparece
- `is_edit = true` (edición) → Campo fecha SÍ aparece pero `disabled = true`

---

**3. Controlador ProductoController (src/Controller/ProductoController.php)**

**Método new() - Creación:**
```php
public function new(Request $request, EntityManagerInterface $entityManager): Response
{
    $this->denyAccessUnlessGranted('IS_AUTHENTICATED_FULLY');
    
    $producto = new Producto();
    
    // Crear formulario SIN campo fecha (is_edit = false)
    $form = $this->createForm(ProductoType::class, $producto, [
        'is_edit' => false
    ]);
    
    $form->handleRequest($request);

    if ($form->isSubmitted() && $form->isValid()) {
        // Asignar usuario automáticamente
        $producto->setUser($this->getUser());
        
        // Al hacer persist, Doctrine ejecuta setFechaAutomatica()
        // y la fecha se crea automáticamente
        $entityManager->persist($producto);
        $entityManager->flush();

        return $this->redirectToRoute('app_producto_index', [], Response::HTTP_SEE_OTHER);
    }

    return $this->render('producto/new.html.twig', [
        'producto' => $producto,
        'form' => $form,
    ]);
}
```

**Método edit() - Edición:**
```php
public function edit(Request $request, Producto $producto, EntityManagerInterface $entityManager): Response
{
    $this->denyAccessUnlessGranted('IS_AUTHENTICATED_FULLY');
    
    // Crear formulario CON campo fecha visible pero deshabilitado (is_edit = true)
    $form = $this->createForm(ProductoType::class, $producto, [
        'show_user' => true,   // Mostrar campo user
        'is_edit' => true      // Mostrar campo fecha (deshabilitado)
    ]);
    
    $form->handleRequest($request);

    if ($form->isSubmitted() && $form->isValid()) {
        // La fecha NO se puede modificar porque está disabled
        $entityManager->flush();

        return $this->redirectToRoute('app_producto_index', [], Response::HTTP_SEE_OTHER);
    }

    return $this->render('producto/edit.html.twig', [
        'producto' => $producto,
        'form' => $form,
    ]);
}
```

---

**FLUJO COMPLETO:**

**Escenario 1: CREAR PRODUCTO**

1. Usuario accede a `/producto/new`
2. Ve formulario con: Nombre, Precio, Categoría (SIN fecha)
3. Llena los campos y da clic en "Crear Producto"
4. Symfony recibe el formulario
5. Valida los datos
6. Asigna usuario automáticamente: `$producto->setUser($this->getUser())`
7. Ejecuta `$entityManager->persist($producto)`
8. **Doctrine detecta que va a insertar** → Ejecuta `setFechaAutomatica()`
9. El método verifica: `if ($this->fecha === null)` → **TRUE**
10. Asigna: `$this->fecha = new \DateTime()` → Ejemplo: "2025-11-13 19:47:48"
11. Doctrine hace INSERT en la base de datos CON la fecha automática
12. Redirige al listado

**Escenario 2: EDITAR PRODUCTO**

1. Usuario accede a `/producto/1/edit`
2. Ve formulario con: Nombre, Precio, Categoría, **Fecha (bloqueada)**, Usuario
3. El campo fecha muestra "2025-11-13 19:47:48" pero está en gris (disabled)
4. Usuario modifica nombre o precio
5. Da clic en "Actualizar"
6. Symfony recibe el formulario
7. Como el campo fecha está `disabled`, el valor NO se envía
8. Doctrine mantiene la fecha original intacta
9. Actualiza solo los campos modificables
10. Redirige al listado

---

**CONCEPTOS TÉCNICOS EXPLICADOS:**

**1. Lifecycle Callbacks:**
Son métodos que Doctrine ejecuta automáticamente en momentos específicos del ciclo de vida de una entidad:

- `#[ORM\PrePersist]` → Antes de INSERT (primera vez)
- `#[ORM\PreUpdate]` → Antes de UPDATE
- `#[ORM\PostPersist]` → Después de INSERT
- `#[ORM\PostUpdate]` → Después de UPDATE
- `#[ORM\PreRemove]` → Antes de DELETE

**2. Options Resolver:**
Sistema de Symfony para configurar opciones de formularios:
```php
'is_edit' => false  // Valor por defecto
```
Se puede sobrescribir al crear el formulario:
```php
$form = $this->createForm(ProductoType::class, $producto, [
    'is_edit' => true  // Sobrescribe el valor por defecto
]);
```

**3. Campo disabled:**
Cuando un campo está `disabled = true`:
- Se muestra en el formulario (usuario lo ve)
- Aparece en gris / no editable
- El navegador NO envía su valor al hacer submit
- Protege el dato de modificaciones

---

**VENTAJAS DE ESTA IMPLEMENTACIÓN:**

✅ **Automatización:** La fecha se crea sola, sin intervención del usuario
✅ **Integridad:** La fecha original nunca se puede modificar
✅ **Transparencia:** En edición, el usuario VE la fecha pero no puede cambiarla
✅ **Simplicidad:** No hay campos ocultos ni lógica compleja en controladores
✅ **Doctrine-native:** Usa características nativas de Doctrine (lifecycle callbacks)
✅ **Seguridad:** El campo disabled previene manipulación por parte del usuario

**COMPARACIÓN:**

| Aspecto | Antes | Ahora |
|---------|-------|-------|
| Fecha en creación | Usuario debía llenarla manualmente | Se crea automáticamente |
| Fecha en formulario NEW | Visible y editable | No aparece (oculto) |
| Fecha en formulario EDIT | Visible y editable | Visible pero bloqueada |
| Riesgo de modificación | Alto (usuario podía cambiarla) | Nulo (disabled = true) |
| Código en controlador | Manual: `$producto->setFecha(new \DateTime())` | Automático vía PrePersist |

Resultado:
✅ Fecha automática implementada con Lifecycle Callbacks
✅ Campo fecha oculto en creación (NEW)
✅ Campo fecha visible pero bloqueado en edición (EDIT)
✅ `#[ORM\HasLifecycleCallbacks]` agregado a la entidad
✅ `#[ORM\PrePersist]` ejecutándose correctamente
✅ Opción `is_edit` controlando visibilidad del campo
✅ Integridad de datos garantizada
✅ Código limpio y mantenible

---

[13/11/2025 07:56:40 p.m.] Implementación de búsqueda por nombre en Categorías y Productos

¿Qué se hizo?
Se implementó un sistema de búsqueda por nombre para los módulos de Categoría y Producto, permitiendo filtrar los listados mediante un formulario de búsqueda con retroalimentación visual.

**Objetivo:**
- Permitir buscar categorías y productos por nombre
- Búsqueda parcial (no necesita ser exacto)
- Mantener el término de búsqueda visible después de buscar
- Mostrar botón para limpiar la búsqueda
- Mensajes contextuales según haya o no resultados

---

**CAMBIOS EN CATEGORÍAS:**

**1. CategoriaRepository (src/Repository/CategoriaRepository.php)**

Agregado método `findByNombre()` para búsqueda con LIKE:

```php
/**
 * Busca categorías por nombre
 * 
 * Este método permite buscar categorías cuyo nombre contenga el término de búsqueda.
 * Usa LIKE con % para buscar coincidencias parciales (no necesita ser exacto).
 * 
 * @param string|null $searchTerm - El término de búsqueda (puede ser null o vacío)
 * @return Categoria[] - Retorna un array de objetos Categoria que coinciden
 */
public function findByNombre(?string $searchTerm): array
{
    // Crear un QueryBuilder para construir la consulta SQL
    // 'c' es el alias que usamos para referirnos a la entidad Categoria
    $qb = $this->createQueryBuilder('c');
    
    // Verificar si hay un término de búsqueda
    // Si searchTerm no está vacío, agregamos la condición WHERE
    if ($searchTerm) {
        $qb
            // WHERE c.nombre LIKE :searchTerm
            // Busca categorías cuyo nombre contenga el término
            ->andWhere('c.nombre LIKE :searchTerm')
            
            // Reemplazar :searchTerm con el valor real
            // El % antes y después permite buscar en cualquier parte del nombre
            // Ejemplo: si buscas "lap", encontrará "Laptops", "Laptop Gaming", etc.
            ->setParameter('searchTerm', '%' . $searchTerm . '%');
    }
    
    // Ordenar los resultados por nombre de forma ascendente (A-Z)
    $qb->orderBy('c.nombre', 'ASC');
    
    // Ejecutar la consulta y obtener los resultados
    return $qb->getQuery()->getResult();
}
```

**Funcionamiento del QueryBuilder:**
- `createQueryBuilder('c')` → Crea un constructor de consultas con alias 'c'
- `andWhere('c.nombre LIKE :searchTerm')` → Agrega condición WHERE con LIKE
- `setParameter('searchTerm', '%' . $searchTerm . '%')` → Reemplaza el placeholder con el valor real
- Los `%` permiten coincidencias parciales en cualquier posición
- `orderBy('c.nombre', 'ASC')` → Ordena alfabéticamente

---

**2. CategoriaController (src/Controller/CategoriaController.php)**

Modificado método `index()` para recibir y procesar búsqueda:

```php
/**
 * Muestra el listado de categorías con opción de búsqueda
 * 
 * Este método maneja la página principal de categorías.
 * Permite buscar categorías por nombre si se proporciona un término de búsqueda.
 * 
 * @param Request $request - Objeto que contiene los datos de la petición HTTP (incluye parámetros GET)
 * @param CategoriaRepository $categoriaRepository - Repositorio para acceder a la base de datos
 * @return Response - Respuesta HTTP con la vista renderizada
 */
#[Route(name: 'app_categoria_index', methods: ['GET'])]
public function index(Request $request, CategoriaRepository $categoriaRepository): Response
{
    // Obtener el parámetro 'search' de la URL (parámetro GET)
    // Por ejemplo: /categoria?search=laptops
    // Si no existe el parámetro, $searchTerm será null
    $searchTerm = $request->query->get('search');
    
    // Buscar categorías usando el método que creamos en el repositorio
    // Si $searchTerm es null o vacío, el método retornará todas las categorías
    // Si tiene un valor, retornará solo las que coincidan con el nombre
    $categorias = $categoriaRepository->findByNombre($searchTerm);
    
    // Renderizar la vista y pasarle dos variables:
    // - categorias: array con las categorías encontradas
    // - searchTerm: el término de búsqueda (para mostrarlo en el campo de búsqueda)
    return $this->render('categoria/index.html.twig', [
        'categorias' => $categorias,
        'searchTerm' => $searchTerm,  // Pasar el término de búsqueda a la vista
    ]);
}
```

**Flujo de búsqueda:**
1. Usuario ingresa término en formulario
2. Formulario hace GET a `/categoria?search=término`
3. Controlador obtiene el parámetro con `$request->query->get('search')`
4. Llama al repositorio con el término
5. Repositorio ejecuta consulta SQL con LIKE
6. Retorna resultados a la vista

---

**3. categoria/index.html.twig (templates/categoria/index.html.twig)**

Agregado formulario de búsqueda completo:

```twig
{# Formulario de búsqueda #}
{# Este formulario envía una petición GET con el parámetro 'search' #}
{# Al hacer submit, recarga la página con ?search=término en la URL #}
<div class="card shadow-sm mb-4">
    <div class="card-body">
        <form method="GET" action="{{ path('app_categoria_index') }}" class="row g-3">
            <div class="col-md-10">
                {# Campo de texto para ingresar el término de búsqueda #}
                {# value={{ searchTerm }} mantiene el valor después de buscar #}
                <input 
                    type="text" 
                    name="search" 
                    class="form-control form-control-lg" 
                    placeholder="Buscar categoría por nombre..." 
                    value="{{ searchTerm }}"
                    autofocus
                >
            </div>
            <div class="col-md-2">
                {# Botón para ejecutar la búsqueda #}
                <button type="submit" class="btn btn-primary btn-lg w-100">
                    <i class="bi bi-search"></i> Buscar
                </button>
            </div>
        </form>
        
        {# Mostrar botón para limpiar búsqueda solo si hay un término activo #}
        {% if searchTerm %}
            <div class="mt-3">
                {# Link que vuelve a la página sin parámetros (muestra todas las categorías) #}
                <a href="{{ path('app_categoria_index') }}" class="btn btn-secondary btn-sm">
                    <i class="bi bi-x-circle"></i> Limpiar búsqueda
                </a>
                <span class="text-muted ms-2">
                    Buscando: "<strong>{{ searchTerm }}</strong>"
                </span>
            </div>
        {% endif %}
    </div>
</div>

{# Verificar si no se encontraron categorías #}
{% if categorias is empty %}
    <div class="alert alert-info" role="alert">
        <i class="bi bi-info-circle"></i> 
        {# Mensaje diferente si hay búsqueda activa o no #}
        {% if searchTerm %}
            No se encontraron categorías que coincidan con "<strong>{{ searchTerm }}</strong>".
            <a href="{{ path('app_categoria_index') }}" class="alert-link">Ver todas las categorías</a>
        {% else %}
            No hay categorías registradas. 
            <a href="{{ path('app_categoria_new') }}" class="alert-link">Crear la primera</a>
        {% endif %}
    </div>
{% else %}
```

**Elementos del formulario:**
- Campo input grande con placeholder
- Atributo `name="search"` → se envía como parámetro GET
- `value="{{ searchTerm }}"` → mantiene el valor después de buscar
- `autofocus` → cursor automático en el campo
- Botón "Buscar" con icono
- Botón "Limpiar búsqueda" (solo si hay término)
- Indicador visual "Buscando: término"
- Mensaje contextual si no hay resultados

---

**CAMBIOS EN PRODUCTOS:**

**4. ProductoRepository (src/Repository/ProductoRepository.php)**

Agregado método `findByNombre()` idéntico a categorías:

```php
/**
 * Busca productos por nombre
 * 
 * Este método permite buscar productos cuyo nombre contenga el término de búsqueda.
 * Usa LIKE con % para buscar coincidencias parciales (no necesita ser exacto).
 * 
 * @param string|null $searchTerm - El término de búsqueda (puede ser null o vacío)
 * @return Producto[] - Retorna un array de objetos Producto que coinciden
 */
public function findByNombre(?string $searchTerm): array
{
    // Crear un QueryBuilder para construir la consulta SQL
    // 'p' es el alias que usamos para referirnos a la entidad Producto
    $qb = $this->createQueryBuilder('p');
    
    // Verificar si hay un término de búsqueda
    // Si searchTerm no está vacío, agregamos la condición WHERE
    if ($searchTerm) {
        $qb
            // WHERE p.nombre LIKE :searchTerm
            // Busca productos cuyo nombre contenga el término
            ->andWhere('p.nombre LIKE :searchTerm')
            
            // Reemplazar :searchTerm con el valor real
            // El % antes y después permite buscar en cualquier parte del nombre
            // Ejemplo: si buscas "mouse", encontrará "Mouse Gamer", "Mouse Inalámbrico", etc.
            ->setParameter('searchTerm', '%' . $searchTerm . '%');
    }
    
    // Ordenar los resultados por nombre de forma ascendente (A-Z)
    $qb->orderBy('p.nombre', 'ASC');
    
    // Ejecutar la consulta y obtener los resultados
    return $qb->getQuery()->getResult();
}
```

---

**5. ProductoController (src/Controller/ProductoController.php)**

Modificado método `index()` con búsqueda y autenticación:

```php
/**
 * Muestra el listado de productos con opción de búsqueda
 * 
 * Este método maneja la página principal de productos.
 * Permite buscar productos por nombre si se proporciona un término de búsqueda.
 * 
 * @param Request $request - Objeto que contiene los datos de la petición HTTP (incluye parámetros GET)
 * @param ProductoRepository $productoRepository - Repositorio para acceder a la base de datos
 * @return Response - Respuesta HTTP con la vista renderizada
 */
#[Route(name: 'app_producto_index', methods: ['GET'])]
public function index(Request $request, ProductoRepository $productoRepository): Response
{
    // Verificar que el usuario esté autenticado antes de mostrar el listado
    // Si no está autenticado, Symfony lo redirigirá automáticamente al login
    $this->denyAccessUnlessGranted('IS_AUTHENTICATED_FULLY');
    
    // Obtener el parámetro 'search' de la URL (parámetro GET)
    // Por ejemplo: /producto?search=laptop
    // Si no existe el parámetro, $searchTerm será null
    $searchTerm = $request->query->get('search');
    
    // Buscar productos usando el método que creamos en el repositorio
    // Si $searchTerm es null o vacío, el método retornará todos los productos
    // Si tiene un valor, retornará solo los que coincidan con el nombre
    $productos = $productoRepository->findByNombre($searchTerm);
    
    // Renderizar la vista y pasarle dos variables:
    // - productos: array con los productos encontrados
    // - searchTerm: el término de búsqueda (para mostrarlo en el campo de búsqueda)
    return $this->render('producto/index.html.twig', [
        'productos' => $productos,
        'searchTerm' => $searchTerm,  // Pasar el término de búsqueda a la vista
    ]);
}
```

---

**6. producto/index.html.twig (templates/producto/index.html.twig)**

Agregado formulario de búsqueda (idéntico a categorías):

```twig
{# Formulario de búsqueda #}
<div class="card shadow-sm mb-4">
    <div class="card-body">
        <form method="GET" action="{{ path('app_producto_index') }}" class="row g-3">
            <div class="col-md-10">
                <input 
                    type="text" 
                    name="search" 
                    class="form-control form-control-lg" 
                    placeholder="Buscar producto por nombre..." 
                    value="{{ searchTerm }}"
                    autofocus
                >
            </div>
            <div class="col-md-2">
                <button type="submit" class="btn btn-primary btn-lg w-100">
                    <i class="bi bi-search"></i> Buscar
                </button>
            </div>
        </form>
        
        {% if searchTerm %}
            <div class="mt-3">
                <a href="{{ path('app_producto_index') }}" class="btn btn-secondary btn-sm">
                    <i class="bi bi-x-circle"></i> Limpiar búsqueda
                </a>
                <span class="text-muted ms-2">
                    Buscando: "<strong>{{ searchTerm }}</strong>"
                </span>
            </div>
        {% endif %}
    </div>
</div>

{# Mensajes contextuales #}
{% if productos is empty %}
    <div class="alert alert-info" role="alert">
        <i class="bi bi-info-circle"></i> 
        {% if searchTerm %}
            No se encontraron productos que coincidan con "<strong>{{ searchTerm }}</strong>".
            <a href="{{ path('app_producto_index') }}" class="alert-link">Ver todos los productos</a>
        {% else %}
            No hay productos registrados. 
            <a href="{{ path('app_producto_new') }}" class="alert-link">Crear el primero</a>
        {% endif %}
    </div>
{% else %}
```

---

**7. producto/show.html.twig - Campo Usuario agregado**

Agregado campo para mostrar el usuario que creó el producto:

```twig
<tr>
    <th scope="row">
        <i class="bi bi-person-circle"></i> Usuario:
    </th>
    <td>
        {% if producto.user %}
            <span class="badge bg-success fs-6">
                <i class="bi bi-person-fill"></i> {{ producto.user.email }}
            </span>
        {% else %}
            <span class="badge bg-secondary">Sin usuario</span>
        {% endif %}
    </td>
</tr>
```

---

**CONCEPTOS TÉCNICOS EXPLICADOS:**

**1. LIKE con % en SQL:**
```sql
-- Búsqueda exacta (sin %):
WHERE nombre = 'Laptop'  -- Solo encuentra "Laptop" exactamente

-- Búsqueda parcial (con %):
WHERE nombre LIKE '%Laptop%'  -- Encuentra: "Laptop", "Laptop Gaming", "Mi Laptop", etc.
WHERE nombre LIKE 'Laptop%'   -- Encuentra: "Laptop", "Laptop Gaming" (empieza con)
WHERE nombre LIKE '%Laptop'   -- Encuentra: "Laptop", "Mi Laptop" (termina con)
```

**2. Request::query->get():**
```php
// URL: /categoria?search=laptop&page=2
$search = $request->query->get('search');  // "laptop"
$page = $request->query->get('page');      // "2"
$otro = $request->query->get('otro');      // null (no existe)
```

**3. Formulario GET vs POST:**
- **GET**: Parámetros en la URL (?search=término)
  - Visible en la barra de direcciones
  - Permite compartir URLs con búsquedas
  - Se puede guardar como favorito
  - Ideal para búsquedas y filtros

- **POST**: Parámetros ocultos en el cuerpo
  - No visible en la URL
  - Ideal para formularios de creación/edición
  - Más seguro para datos sensibles

**4. QueryBuilder vs DQL vs SQL:**
```php
// QueryBuilder (orientado a objetos):
$qb->andWhere('c.nombre LIKE :term')->setParameter('term', '%' . $term . '%');

// DQL (Doctrine Query Language - similar a SQL):
$query = "SELECT c FROM App\Entity\Categoria c WHERE c.nombre LIKE :term";

// SQL puro (menos recomendado):
$sql = "SELECT * FROM categoria WHERE nombre LIKE '%{$term}%'";  // ⚠️ Peligro: SQL injection
```

---

**VENTAJAS DE ESTA IMPLEMENTACIÓN:**

✅ **Búsqueda flexible:** No necesita escribir el nombre exacto
✅ **UX mejorada:** Campo mantiene el término después de buscar
✅ **Feedback visual:** Muestra qué se está buscando
✅ **Fácil limpieza:** Botón para volver al listado completo
✅ **Mensajes contextuales:** Diferentes mensajes según el contexto
✅ **URLs compartibles:** Puedes compartir la búsqueda por URL
✅ **Ordenamiento:** Resultados ordenados alfabéticamente
✅ **Código documentado:** Comentarios extensos en todos los archivos
✅ **Consistencia:** Misma implementación en ambos módulos

**EJEMPLOS DE USO:**

| Búsqueda | Encuentra |
|----------|-----------|
| "lap" | Laptops, Laptop Gaming, Laptop Oficina |
| "mouse" | Mouse Gamer, Mouse Inalámbrico, Mouse Pad |
| "gam" | Gaming, Mouse Gamer, Laptop Gaming |
| "a" | Todos los que contengan la letra "a" |
| "" (vacío) | Todos los registros |

Resultado:
✅ Búsqueda por nombre implementada en Categorías
✅ Búsqueda por nombre implementada en Productos
✅ Método `findByNombre()` en ambos repositorios
✅ Controladores modificados para procesar búsqueda
✅ Formularios de búsqueda en ambas vistas
✅ Botón "Limpiar búsqueda" funcional
✅ Mensajes contextuales según resultados
✅ Campo de usuario agregado en producto/show
✅ Código completamente documentado con comentarios
✅ QueryBuilder con LIKE y ordenamiento
✅ URLs amigables para compartir búsquedas

---

